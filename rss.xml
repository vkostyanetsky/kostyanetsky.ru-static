<rss version="2.0">
    <channel>    
        <title>Влад Костянецкий</title>
        <description>Привет! Меня зовут Влад, я — разработчик приложений для бизнеса.</description>
        <language>ru</language>
        <link>https://kostyanetsky.ru</link>
        <lastBuildDate>Sat, 15 Oct 2022 18:22:43 +0700</lastBuildDate>
        
        <item>
            <title>Про странный Битрикс</title>
            <link>https://kostyanetsky.ru/notes/strange-bitrix/</link>
            <guid isPermaLink="false">note-strange-bitrix</guid>
            <pubDate>Sat, 15 Oct 2022 18:22:43 +0700</pubDate>
            <description><p class="measure-wide">Чем дальше лезу в REST-интерфейс Битрикс24, тем сильнее поражаюсь тому, насколько необычно устроено мышление у его разработчиков.</p>
<p class="measure-wide">Возьмем, например, интерфейс сделок и товаров по ним. В таблице последних нет поля суммы: мол, нужна тебе сумма по строке — сам и считай. Зато сумма есть на уровне документа. Угадаете, как называется поле?</p>
<p class="measure-wide">AMOUNT? DEAL_AMOUNT? DOCUMENT_AMOUNT? AMOUNT_TOTAL?</p>
<p class="measure-wide">Не угадали, правильный ответ — OPPORTUNITY.</p>
<p class="measure-wide"><img alt="Чего, блядь?" src="https://kostyanetsky.ru/notes/strange-bitrix/what-the-fuck.jpg"/></p>
<p class="measure-wide">Но вернемся в строке товара. В ней есть товар, ставка НДС и единица измерения. Все три сущности вполне самостоятельны: у каждой есть отдельная таблица со вспомогательной информацией и свой собственный идентификатор. Логично предположить, что в строке товара они и хранятся: ID товара, ID ставки НДС и ID единицы измерения.</p>
<p class="measure-wide">Логично-то логично, но нет, хрен там плавал. Для номенклатуры и правда хранится ID, а вот для ставки НДС — значение ставки, и для единицы измерения — код измерения по ОКЕИ 🤷‍♂️</p>
<p class="measure-wide">Нормализация базы данных? Чего? Какая еще нормализация? Отвали, мужик, работать мешаешь.</p></description>
        </item>
        
        <item>
            <title>Групповая работа в Google Docs</title>
            <link>https://kostyanetsky.ru/notes/anonymous-quokka/</link>
            <guid isPermaLink="false">note-anonymous-quokka</guid>
            <pubDate>Sun, 18 Sep 2022 16:25:48 +0700</pubDate>
            <description><p class="measure-wide">Посмотрел <a class="link blue dim bb" href="https://www.youtube.com/watch?v=p6D7SdhO4LI" target="_blank">вебинар</a> Евгения Филиппова про Баблокс. В общем, это такая дополнительная методика оценки производительности. Как и Апдекс, опирается на замеры времени — но предлагает иную механику расчета.</p>
<p class="measure-wide">Чтобы посчитать Баблокс, нужно умножить продолжительность операции на зарплату пользователя, который эту операцию делает. Зарплатой может быть:</p>
<ul class="measure-wide">
<li>Некое среднее значение, если нужно поверхностно сравнить производительность одинаковой программы в нескольких компаниях.</li>
<li>Реальная зарплата пользователя, если нужно доказать руководству, что пришло время выделить бюджет на оптимизацию.</li>
</ul>
<p class="measure-wide">В итоге получим сумму, которую бизнес потерял, условно, из-за тормозов программы. В этом главный плюс методики: это число проще донести до среднего финансового директора. Что означает Апдекс, равный нулю целых пяти десятых — еще поди объясни, а вот что такое потерянные триста тысяч рублей — понятно сразу.</p>
<p class="measure-wide">Кроме того, снимаются субъективные вопросы, которые возникают при каждом внедрении. Например, определение ключевых операций; вот скажите, что важнее — быстрее продать товар или оприходовать на склад? Когда известно, сколько компания теряет в деньгах на каждой из этих операций — ответ дать куда проще.</p>
<p class="measure-wide">Конечно, это не идеальная модель. Например, возьмем такую ситуацию: программа тормозит у кладовщиков, но нормально работает у бухгалтеров. Зарплата кладовщиков ниже, чем зарплата бухгалтеров, и Баблокс для них будет невелик. Однако бухгалтера работают с тем, что ввели кладовщики, и пока последние не закончили — бухгалтерам нечем заняться. То есть компания теряет деньги из-за тормозов программы у кладовщиков, но Баблокс это не покажет.</p>
<p class="measure-wide">В общем, Баблокс вряд ли подвинет позиции Апдекса внутри айти-сообщества, но это и правда любопытный подход, который может здорово помочь в диалоге с клиентом.</p></description>
        </item>
        
        <item>
            <title>Слак советует</title>
            <link>https://kostyanetsky.ru/notes/slack/</link>
            <guid isPermaLink="false">note-slack</guid>
            <pubDate>Thu, 25 Aug 2022 19:02:53 +0700</pubDate>
            <description><p class="measure-wide">Слак, конечно, есть за что ругать. За тормоза, за баги, за <a class="link blue dim bb" href="https://t.me/nikitonsky_pub/262" target="_blank">оповещения</a>. Но я просто обожаю его заглушки на случай, если новых сообщений нет.</p>
<p class="measure-wide">Посмотрите, какая милота:</p>
<p class="measure-wide"><img alt="All done. The future is yours." src="https://kostyanetsky.ru/notes/slack/all-done.png"/></p>
<p class="measure-wide">Зачем вообще нужны психотерапевты?</p>
<p class="measure-wide"><img alt="You're up to date. Go forth and do great things." src="https://kostyanetsky.ru/notes/slack/up-to-date.png"/></p>
<p class="measure-wide">Или вот:</p>
<p class="measure-wide"><img alt="You're all read. Here is a tractor." src="https://kostyanetsky.ru/notes/slack/here-is-tractor.png"/></p>
<p class="measure-wide">Боже, слак, хоть ты не начинай.</p></description>
        </item>
        
        <item>
            <title>Взболтать, но не смешивать</title>
            <link>https://kostyanetsky.ru/notes/shaken-not-stirred/</link>
            <guid isPermaLink="false">note-shaken-not-stirred</guid>
            <pubDate>Sun, 07 Aug 2022 19:04:51 +0700</pubDate>
            <description><p class="measure-wide">Затрем немного про организацию кода. Если вам нужно где-то описать множество объектов с общими свойствами — подумайте, не стоит ли подробить описание на отдельные методы, каждый из которых будет описывать один конкретный объект?</p>
<p class="measure-wide">Посмотрим на пример — метод, который описывает табличные части документов, пригодные для какой-то задачи. Что-то вроде:</p>
<pre><code>SupportedTypes["Document.SupplierPricesEntering"]   = "Prices";
SupportedTypes["Document.OpeningBalancesEntering"]  = "CustomerAccounts,VendorAccounts";
SupportedTypes["Document.Requisition"]              = "InventoryAndServices";
</code></pre>
<p class="measure-wide">Вроде всё в порядке, так? Описания есть, табличные части перечислены, посплитить их по запятой — считай, бесплатно.</p>
<p class="measure-wide">Однако документов в методе описано много. Рано или поздно какому-нибудь коллеге (или вам самим) понадобится добавить ещё одну табличную часть для документа, который уже описан в методе. Его что-то отвлечет, он забудет поискать существующую строку и получится что-то вроде:</p>
<pre><code>SupportedTypes["Document.SupplierPricesEntering"]   = "Prices";
SupportedTypes["Document.OpeningBalancesEntering"]  = "CustomerAccounts,VendorAccounts";
SupportedTypes["Document.Requisition"]              = "InventoryAndServices";

&lt;...&gt;

SupportedTypes["Document.OpeningBalancesEntering"]  = "PayrollDeductions";
</code></pre>
<p class="measure-wide">В результате пара табличных частей выпадет из описания, и хорошо, если связанный функционал покрыт тестами.</p>
<p class="measure-wide">Вывод? Ну, можно написать метод-хелпер, который будет принимать на вход тип документа и имя <strong>одной</strong> табличной части. Хелпер будет заполнять соответствие SupportedTypes и следить за тем, чтобы уже добавленные в него данные не были потеряны.</p>
<p class="measure-wide">А если совсем по фен-шую, лучше поступить так, как я написал в начале заметки: разделить метод на отдельные вспомогательные методы, каждый из которых будет описывать только табличные части по одному документу. Что-то вроде:</p>
<pre><code>Procedure AddOpeningBalancesEnteringDocument(SupportedTypes)

    TabularSections = New Array;

    TabularSections.Add("CustomerAccounts");
    TabularSections.Add("VendorAccounts");
    TabularSections.Add("PayrollDeductions");

    SupportedTypes["Document.Requisition"] = StrConcat(TabularSections, ",");

EndProcedure
</code></pre>
<p class="measure-wide">Так и описание документа никто случайно не сотрет, и Сонар будет доволен. А вот случае реализации хелпера он, скорее всего, примется ругаться на повторяющиеся литералы с именами табличных частей.</p></description>
        </item>
        
        <item>
            <title>Не так, а этак!</title>
            <link>https://kostyanetsky.ru/notes/not-but/</link>
            <guid isPermaLink="false">note-not-but</guid>
            <pubDate>Sat, 23 Jul 2022 11:32:48 +0700</pubDate>
            <description><p class="measure-wide">Про хорватский комикс <a class="link blue dim bb" href="http://www.to-zo.com/notbut" target="_blank">NOT/BUT</a> мне кто-то рассказал в начале прошлого года, когда я всерьёз учился рисовать. Каждый стрип там — про какую-то травмирующую или просто мрачную мысль, которая приходит в голову художника во время работы. Идея в том, чтобы подтолкнуть читателя в правильном направлении и дать ему посмотреть на ситуацию, в которую он попал, с более практичной стороны.</p>
<p class="measure-wide">Рисовать я бросил через год, в конце февраля: стало понятно, что времени на хобби у меня больше нет. Но комикс — совершенно универсальный; полистайте, даже если понятия не имеете, что такое клячка :-)</p>
<p class="measure-wide"><a href="http://www.to-zo.com/notbut" target="_blank"><img alt="Да что за херня?" src="https://kostyanetsky.ru/notes/not-but/mistakes.png"/></a></p>
<p class="measure-wide">Все эти бесконечные самокопания хорошо знакомы любому профессионалу, а выход из них — не всегда очевиден. Особенно если ты зол, устал, а дедлайн по проекту истёк где-то на прошлой неделе.</p></description>
        </item>
        
        <item>
            <title>Окей!</title>
            <link>https://kostyanetsky.ru/notes/ok/</link>
            <guid isPermaLink="false">note-ok</guid>
            <pubDate>Fri, 22 Jul 2022 13:13:00 +0700</pubDate>
            <description><iframe allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen="" frameborder="0" height="315" src="https://www.youtube.com/embed/GuIPxcXwF30" width="560"></iframe>
<p class="measure-wide">Блин. Посмотрел видео и понял, что я как раз давным-давно просто пишу OK в утренних дейликах в ответ на вопрос «how do you feel today». Мол, со мной всё в норме, жив-здоров, на работу ничто не влияет.</p>
<p class="measure-wide">Что обо мне думали коллеги — боюсь предположить. Надеюсь, они тоже не знали про то, что okay в ответе на такой вопрос нифига не значит okay. :-)</p></description>
        </item>
        
        <item>
            <title>Баночка с печеньем</title>
            <link>https://kostyanetsky.ru/notes/cookie-jar/</link>
            <guid isPermaLink="false">note-cookie-jar</guid>
            <pubDate>Sat, 28 May 2022 21:34:38 +0700</pubDate>
            <description><p class="measure-wide">На днях прикручивал работу с куками к одному из своих скриптов. Пока искал оптимальное решение, наткнулся на совершенно очаровательный (при этом, кстати, 100% рабочий) <a class="link blue dim bb" href="https://stackoverflow.com/questions/13030095/how-to-save-requests-python-cookies-to-a-file" target="_blank">совет</a> со StackOverflow:</p>
<blockquote>
<p class="measure-wide">You can get a CookieJar object from the session with session.cookies, and use pickle to store it to a file.</p>
</blockquote>
<p class="measure-wide">Ну то есть, буквально: держите ваше печенье в банке, а чтобы хранить его — маринуйте. Банку с маринованным печеньем, кстати, потом можно поставить на <a class="link blue dim bb" href="https://docs.python.org/3/library/shelve.html" target="_blank">полку</a>.</p>
<p class="measure-wide">Вот как после этого не любить пайтон, а?</p>
<p class="measure-wide">P.S. Пока писал заметку, разобрало любопытство — почему всё-таки pickle, а нe serialization? Так вот, если вкратце: <a class="link blue dim bb" href="https://stackoverflow.com/questions/27324986/pickles-why-are-they-called-that/27325007#27325007" target="_blank">таков путь</a>.</p></description>
        </item>
        
        <item>
            <title>Минус встроенные твиты</title>
            <link>https://kostyanetsky.ru/notes/no-more-embedded-tweets/</link>
            <guid isPermaLink="false">note-no-more-embedded-tweets</guid>
            <pubDate>Mon, 21 Mar 2022 20:25:48 +0700</pubDate>
            <description><p class="measure-wide">Не успел я <a class="link blue dim bb" href="https://kostyanetsky.ru/notes/no-more-google-fonts/" target="_blank">выпилить</a> из блога Google Fonts, как пришлось отправить вдогонку встроенные твиты.</p>
<p class="measure-wide">Как это работало раньше? Хотел сослаться на твит — просто вставлял на него ссылку. Скрипт сборки заменял её на HTML-блок, который находил скрипт Твиттера и заменял на текст твита (и всякими полезными ссылками). Вот в этом <a class="link blue dim bb" href="https://github.com/vkostyanetsky/BlogBuilder/commit/c21ef8a7bec10672406e6be57b8e734ba3ac01c5" target="_blank">коммите</a> в целом видно, как это работало.</p>
<p class="measure-wide">Как это работает теперь? Ну да, никак. Твиттер в России заблокирован, так что его скрипты работают только со включенным VPN.</p>
<p class="measure-wide"><img alt="Штош" src="https://kostyanetsky.ru/notes/no-more-embedded-tweets/well.jpg"/></p>
<p class="measure-wide">Пришлось поскринить все твиты, на которые я когда-то ссылался, и добавить их в заметки в виде картинок со ссылками. Кому нужен оригинал, тот включит VPN и перейдёт в Твиттер, а остальные, по крайней мере, могут прочитать текст.</p>
<p class="measure-wide">Пара слов про техническую сторону. Скринить каждый твит вручную мне было лень, поэтому я полез в сеть, обдумывая, как автоматизировать процесс. Сначала попадались только сервисы, готовые решить проблему за какие-то жалкие десять долларов (спасибо, как-нибудь в следующий раз), но потом я набрёл на идеальный <a class="link blue dim bb" href="https://github.com/privatenumber/snap-tweet" target="_blank">инструмент</a>: консольный скрипт для Node.js.</p>
<p class="measure-wide">Ничего лишнего. Чистый функционал. Ты ему — твит. Он тебе — картинку:</p>
<blockquote>
<p class="measure-wide">npx snap-tweet https://twitter.com/PossumEveryHour/status/1506148678461014016</p>
</blockquote>
<p class="measure-wide">И всё. Захотелось занести автору денег.</p>
<p class="measure-wide">Подумал, не прикрутить ли snap-tweet к скрипту сборки (чтобы было, как раньше: вставляешь ссылку на твит, а дальше оно само генерит картинку и кладёт куда надо). Решил, нафиг. Грубое попирание KISS, да и вообще... В мире и так хватает энтропии. Особенно, блин, сейчас.</p></description>
        </item>
        
        <item>
            <title>Смотри не перепутай</title>
            <link>https://kostyanetsky.ru/notes/do-not-confuse/</link>
            <guid isPermaLink="false">note-do-not-confuse</guid>
            <pubDate>Wed, 16 Mar 2022 20:09:31 +0700</pubDate>
            <description><p class="measure-wide"><img alt="Код" src="https://kostyanetsky.ru/notes/do-not-confuse/do-not-confuse.png"/></p>
<p class="measure-wide">Если вид операции — продажа товара или недвижимости, то открой общую форму AdvancesPickFormWithVAT с параметрами, описанными в структуре PickParameters. Колбеком будет метод EditPrepaymentOffsetEnd, описанный в этом же модуле; передай ему структуру AdditionalParameters. Форму нужно открыть так, чтобы она заблокировала весь интерфейс.</p>
<p class="measure-wide">А вот если вид операции — возврат поставщику, то открой общую форму AdvancesPickFormWithVAT с параметрами, описанными в структуре PickParameters. Колбеком будет метод EditPrepaymentOffsetEnd, описанный в этом же модуле; передай ему структуру AdditionalParameters. Форму нужно открыть так, чтобы она заблокировала весь интерфейс.</p>
<p class="measure-wide">Смотри не перепутай.</p></description>
        </item>
        
        <item>
            <title>Минус Google Fonts</title>
            <link>https://kostyanetsky.ru/notes/no-more-google-fonts/</link>
            <guid isPermaLink="false">note-no-more-google-fonts</guid>
            <pubDate>Sat, 19 Feb 2022 20:25:48 +0700</pubDate>
            <description><p class="measure-wide"><a href="https://twitter.com/PixelAmbacht/status/1494272370076536840" target="_blank"><img alt="Твит" src="https://kostyanetsky.ru/notes/no-more-google-fonts/snap-tweet-PixelAmbacht-1494272370076536840.png"/></a></p>
<p class="measure-wide">Год назад, блин. Ладно, всем привет! С вами Джонни Слоупок! Сегодня мы будем выпиливать из моего блога работу с Google Fonts. Я подгружал с него основной шрифт (PT Sans), но без кросс-доменного кэширования единственный смысл делать это дальше — если сервер, на котором работает сайт, слабоват и с гугла шрифты грузятся шустрее. </p>
<p class="measure-wide">В моем случае блог отдают сервера гитхаба, которые на производительность не жалуются, так что теперь PT Sans загружается прямо с них. И знаете что? Разница прямо драматическая. Если раньше при обновлении страницы была явно заметна задержка между загрузкой страницы и загрузкой шрифта, то теперь её невооруженным глазом не разобрать. Если у вас свой блог и хотите попробовать — вот тут есть классный <a class="link blue dim bb" href="https://google-webfonts-helper.herokuapp.com/fonts" target="_blank">сервис</a>, который решает задачу в несколько кликов.</p>
<p class="measure-wide">Не забудьте повесить звезду на <a class="link blue dim bb" href="https://github.com/majodev/google-webfonts-helper" target="_blank">репозиторий</a>!</p></description>
        </item>
        
    </channel>
</rss>