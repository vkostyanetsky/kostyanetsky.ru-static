<rss version="2.0">
    <channel>    
        <title>Влад Костянецкий</title>
        <description>Привет! Меня зовут Влад, я — разработчик приложений для бизнеса.</description>
        <language>ru</language>
        <link>https://kostyanetsky.ru</link>
        <lastBuildDate>Sun, 25 Aug 2024 14:58:48 +0700</lastBuildDate>
        
        <item>
            <title>Анализ систем</title>
            <link>https://kostyanetsky.ru/notes/system-analysis-course</link>
            <guid isPermaLink="false">note-system-analysis-course</guid>
            <pubDate>Sun, 25 Aug 2024 14:58:48 +0700</pubDate>
            <description><p>Среди всех этих пет-проектов и августовских переживаний забыл упомянуть, что завершил <a href="https://tough-dev.school/system-analysis" target="_blank">курс</a> по анализу систем, о котором недавно <a href="https://kostyanetsky.ru/notes/ibrahim" target="_blank">писал</a>.</p>
<p><img alt="Сертификат" src="https://kostyanetsky.ru/notes/system-analysis-course/certificate.png"/></p>
<p>Курс был устроен так, что на протяжении всех занятий мы работали над одной и той же системой, выявляли проблемы и постепенно их решали. Перед первым уроком нам предложили спроектировать первую версию системы, чтобы потом, в конце курса, сравнить её с финальной версией и оценить прогресс. Так вот, сравнением я доволен — в том смысле, что на первую версию теперь без слез смотреть сложно :)</p>
<p>Времени для рефлексии на курсе было в целом мало, так что буду дальше работать над материалами и растаскивать уроки на личные заметки. Это не так-то просто, так как у нас в компании много специфики связано с решениями на базе 1С:Предприятия, и масса моей работы крутится вокруг разной обвязки 1С-инстансов на решениях вне стека 1С. </p>
<p>Однако 1С-инстансы, кажется, можно воспринимать как монолиты с определенным набором характеристик (в зависимости от решаемых внутри задач), а в остальном коммуникации с ними мало чем отличаются от традиционных решений: те же события (например, кролик), те же входящие/исходящие HTTP-вызовы, тот же показатель instability и так далее.</p>
<p>На этом этапе я точно потащу (или уже потащил) к себе:</p>
<ol>
<li>Распил ТЗ на нумерованные пункты (US-XXX) и хранение их в одном месте с пометками «updated at», «canceled at» и так далее. Кажется, удачный формат.</li>
<li>Ведение ADR. Собственно, это уже внедрил. Несколько смущает, правда, что в них периодически оседает что-то, что архитектурой в прямом смысле не является (например, принципы логирования событий на каком-то участке). Однако такие штуки тоже кажутся важными для принятия решений.</li>
<li>Event Storming как способ визуализации бизнес-процессов. Не могу сказать, что он сильно выигрывает по сравнению с той сборной солянкой, которая до этого обычно оседала у нас, но результат выглядит симпатично и вообще: какой-то стандарт лучше, чем никакого.</li>
<li>Диаграммы сервисов приложения с наклеенными стикерами, указывающими характеристики. Достаточно функционально, если надо взглянуть на проект с высоты птичьего полета и опять же не так сухо, как гигантские таблицы. То есть, если сработает bus factor — выше шанс, что следующий (или следующая) я заметит эти детали.</li>
<li>Хочу делать BPMN-ки и Activity Diagrams. Формат мне нравится, но пока мои попытки оставляют желать лучшего. Буду пробовать ещё.</li>
<li>Неожиданно зашел концепт разделения функционала для снижения зависимостей. Раньше казалось, что всегда проще склеить похожий функционал для снижения объёма кода, но, кажется, это увеличивает и сложность, и внутреннюю связность — а значит, может сильно больше вредить, чем помогать.</li>
</ol>
<p>В целом курсом очень доволен. Кажется, лучшее вложение сил за последний год. Если думаете идти туда, но сомневаетесь — идите :)</p></description>
        </item>
        
        <item>
            <title>Мой первый подход к генеративкам</title>
            <link>https://kostyanetsky.ru/notes/first-pancake</link>
            <guid isPermaLink="false">note-first-pancake</guid>
            <pubDate>Sun, 25 Aug 2024 14:07:48 +0700</pubDate>
            <description><p>Понадобилось по-быстрому наделать картинок для одного пет-проекта. Развернул первое, что под руку попалось — <a href="https://huggingface.co/hakurei/waifu-diffusion" target="_blank">WaifuDiffusion</a> (это такой клон <a href="https://huggingface.co/stabilityai/stable-diffusion-3-medium" target="_blank">StableDiffusion</a>, но обученный на аниме и манге).</p>
<p>Запрос: </p>
<blockquote>
<p>A dimly lit, empty classroom with faintly visible music notes on the chalkboard. A young woman with long blue hair and blue eyes, is standing behind the teacher's desk, packing her things into a small handbag. She looks tired and worried.</p>
</blockquote>
<p>Результат:</p>
<p><img alt="Молодая женщина" src="https://kostyanetsky.ru/notes/first-pancake/young-woman.jpg"/></p>
<p>Кажется, это отличный повод рассказать, как далеко вперед шагнули нейросети! Модель с порога раскусила задумку и предложила ввести в сюжет... Хм... Мудрого бородача? Или, возможно, намекнула, что я должен больше ценить неожиданные сюрпризы?</p>
<p>Думаю, WaifuDiffusion просто решила поднять мне настроение. Смех, говорят, продлевает жизнь. В любом случае, первую генерацию считаю успешной! Но над калибровкой явно придется поработать еще :)</p></description>
        </item>
        
        <item>
            <title>Переключалка дней для Obsidian</title>
            <link>https://kostyanetsky.ru/notes/obsidian-day-switcher</link>
            <guid isPermaLink="false">note-obsidian-day-switcher</guid>
            <pubDate>Sat, 17 Aug 2024 15:11:48 +0700</pubDate>
            <description><p>Когда активно работаешь в ежедневных заметках Obsidian'а, часто хочется сунуть нос в заметку за вчера или, наоборот, на завтра. Например, когда сортируешь сегодняшние задачи и хочешь отложить часть на завтра.</p>
<p>Каждый раз набирать нужную дату мне лень, поэтому я написал под это <a href="https://gist.github.com/vkostyanetsky/6c70f00b817157f9b6e62ee89bade853" target="_blank">скрипт</a>. Берет дату заметки из её названия (ожидает, что она в формате <abbr title="2024-08-17, например.">ISO 8601</abbr>) и рисует выноску со ссылками на вчера и завтра для неё. В заголовке выводит день недели для дополнительного удобства:</p>
<p><img alt="Пример" src="https://kostyanetsky.ru/notes/obsidian-day-switcher/callout.jpg"/></p>
<p>Скрипт написан для плагина <a href="https://github.com/blacksmithgu/obsidian-dataview" target="_blank">Dataview</a>, потому что я его и так использую для других задач. Можно легко переделать его для <a href="https://github.com/SilentVoid13/Templater" target="_blank">Templater</a>, <a href="https://github.com/saml-dev/obsidian-custom-js" target="_blank">CustomJS</a> или отдельный плагин накидать (мне, опять-таки, было лень возиться). </p>
<p>Если будете использовать: </p>
<ol>
<li>В функции noteLink() пропишите путь к вашей папке с ежедневными заметками (сейчас в ней папка Days для примера; путь, если забыли, указан в настройке Daily notes/New file location);</li>
<li>Закиньте скрипт в шаблон ежедневной заметки (настройка Daily notes/Template file location).</li>
</ol></description>
        </item>
        
        <item>
            <title>Клементина запомнит это</title>
            <link>https://kostyanetsky.ru/notes/clementine</link>
            <guid isPermaLink="false">note-clementine</guid>
            <pubDate>Fri, 09 Aug 2024 23:09:32 +0700</pubDate>
            <description><p>Когда ChatGPT запоминает какую-то деталь диалога на будущее, он рисует над своим ответом плашку "Memory updated". Типа, я понял:</p>
<p><img alt="Memory updated" src="https://kostyanetsky.ru/notes/clementine/memory-updated.jpg"/></p>
<p>Каждый раз смешно: сразу вспоминается <a href="https://store.steampowered.com/app/207610/The_Walking_Dead/" target="_blank">The Walking Dead</a> и мем «Клементина запомнит это» :) В этой игре персонажи, окружающие протагониста, запоминали его решения и это оказывало влияние на их поведение. В том числе и Клементина — девочка, которую главный герой спасает в начале игры.</p>
<p><img alt="Клементина запомнит это" src="https://kostyanetsky.ru/notes/clementine/remember.jpeg"/></p>
<p>В игре эта механика была сделана, если честно, так себе, а вот ChatGPT и правда все запоминает. Внимание к деталям такое, что иногда приходится напоминать себе, что разговариваешь с языковой моделью, а не с необыкновенно участливым и очень эрудированным человеком.</p></description>
        </item>
        
        <item>
            <title>Сделать окно дверью</title>
            <link>https://kostyanetsky.ru/notes/make-my-window-a-door</link>
            <guid isPermaLink="false">note-make-my-window-a-door</guid>
            <pubDate>Sun, 04 Aug 2024 19:26:48 +0700</pubDate>
            <description><p>Вчера во время прогулки слушал <a href="https://music.yandex.ru/album/13443698/track/24134841" target="_blank">Be Somebody</a> от Thousand Foot Krutch и неожиданно зацепился за фразу «you made my window a door». Мне эта идиома всегда казалась забавной: блин, врезать дверь вместо окна — это как-то небезопасно звучит. Можно выпасть с десятого этажа, например. </p>
<p>Но песня-то чудесная и совсем не про то! Стало любопытно; пошел копаться, какой смысл вкладывают носители языка. </p>
<p>Оказалось, это про две разные позиции: пассивный наблюдатель и активный участник. То есть, если перед тобой окно — ты лишь смотришь сквозь него на что-то или кого-то. А вот дверь можно открыть и что-то сделать. Так что «when I could only see the floor you made my window a door» — это по смыслу что-то вроде «когда мои руки опустились, ты помогла мне встать».</p>
<p>Кстати, есть ещё одна похожая идиома — «to be a better window than a door». Абстракция здесь та же: если какой-то человек похож на окно, а не на дверь — он никогда не подпускает окружающих близко к себе, делая пассивных наблюдателей даже из очень близких ему людей.</p></description>
        </item>
        
        <item>
            <title>Яга</title>
            <link>https://kostyanetsky.ru/notes/yaga</link>
            <guid isPermaLink="false">note-yaga</guid>
            <pubDate>Mon, 29 Jul 2024 01:21:21 +0700</pubDate>
            <description><p>Случайно вспомнил, что полгода назад кто-то из коллег закинул в рабочий чат ссылку на <a href="https://yaga.rt.ru" target="_blank">Ягу</a> — будущего (наверное) конкурента JIRA в России. Разработкой, судя по URL, занимаются ребята из Ростелекома. Проснулось любопытство  — как оно там, взлетело?</p>
<p>Увы, но похоже, что нет. По крайней мере, на лендинге висит стандартное «оставьте заявку и ждите ответного гудка». Доступна урезанная версия для команд поменбше, но я сейчас не в России, и клик по кнопке «Начать пользоваться» приводит к бану. Ладно, как-нибудь в следующий раз.</p>
<p>Нейминг, конечно, у ребят кликбейтный. Но не уверен, что прям удачный. Например, название «1С», может, и провоцирует натужные шутки (один эс! задница Одина! хахаха!), но если ты гуглишь его — то, скорее, находишь инфу про платформу или хотя бы вендора. А не кучу статей, фанфиков, фанарта и видеоигр, как в случае с Ягой.</p>
<p>И вообще, ассоциации какие-то не те лезут. Избушка на курьих ножках? Выглядит как изначально <a href="https://kostyanetsky.ru/notes/evolution" target="_blank">плохо спроектированное</a> приложение, которое кое-как переделали прямо на проде. Ступа? Костыль? Блин, если смотреть с точки зрения программистов — тут не красные флаги, а алые знамена :)</p>
<p>Ну и я еще, наверное, испорченный, но при слове «Яга» у меня в голове первым делом всплывает не могущественная ведьма из славянского фольклора, а <a href="https://ru.wikipedia.org/wiki/Jaguar_(напиток)" target="_blank">отвратительное пойло</a> из двухтысячных.</p>
<blockquote>
<p>И вот баба с ягой уже не быдло, а патриотичная программистка!</p>
<p>― коллега</p>
</blockquote></description>
        </item>
        
        <item>
            <title>Ибрагим</title>
            <link>https://kostyanetsky.ru/notes/ibrahim</link>
            <guid isPermaLink="false">note-ibrahim</guid>
            <pubDate>Sun, 07 Jul 2024 20:29:24 +0700</pubDate>
            <description><p>Закатился в <a href="https://tough-dev.school/system-analysis" target="_blank">курс по анализу систем</a>, который проводят ребята из "Школы сильных программистов". Цели у меня две:</p>
<ol>
<li>Во-первых, надо откалиброваться. Много бодаюсь с полдюжиной технических стеков, у которых разный тулсет и понятия о прекрасном. Это, конечно, здорово развивает, но искажает перспективу: меня тянет решать очередную проблему со всяких второстепенных технических штук просто потому, что я это хорошо умею. Между тем, если посмотреть на задачу чуть сверху, подумать и порисовать диаграммы — получается более удачное или, хотя бы, более осмысленное решение. Хочу убедить себя делать так почаще.</li>
<li>Во-вторых, надо научиться писать внятную документацию для разработчиков. На практике до нее редко доходят руки, а когда доходят — не успеваю поддерживать её в актуальном состоянии. Короче, времени мало, и хочется по крайней мере делать доку как-то так, чтобы читатель живее хватался за мысль.</li>
</ol>
<p>Сам курс сделан в виде итераций: каждую неделю тебе рассказывают про один и тот же проект, который пытается спроектировать главный герой истории, Ибрагим (это он на лендинге по ссылке выше). Каждую неделю проблем с этим проектом все больше и решения, которые выдумывает Ибрагим, становятся все заковыристее. </p>
<p>Кроме этого, студентам регулярно выдают "домашнюю работу" — другой проект с похожими проблемами. Его нужно проанализировать и спроектировать по-человечески — снова и снова, учитывая новые знания и ограничения, полученные за неделю.</p>
<p>Пока здорово заходит. Главная проблема — нехватка времени: читаю я сравнительно медленно и стараюсь конспектировать самые интересные или просто сложные места. Между тем, материалов в курсе очень много и все интересные, даже если считать только основную часть.</p>
<p>А переходишь к дополнительным ссылкам — вообще хоть святых выноси. Нужно полгода, не меньше. Я старался читать их хотя бы по диагонали, но это оказалось чертовски плохой идеей: кончилось тем, что главный герой курса начал мне мерещиться в уличной рекламе :)</p>
<p><img alt="Ибрагим" src="https://kostyanetsky.ru/notes/ibrahim/ibrahim.jpg"/></p></description>
        </item>
        
        <item>
            <title>Сингапурская кукла</title>
            <link>https://kostyanetsky.ru/notes/singapore-doll</link>
            <guid isPermaLink="false">note-singapore-doll</guid>
            <pubDate>Sat, 22 Jun 2024 23:46:57 +0700</pubDate>
            <description><p>Можно ли любить валюту своей страны сильнее, чем жители Саудовской Аравии? Вопрос риторический: уверен, что нет.</p>
<p>Разглядываю <a href="https://www.sama.gov.sa/en-US/FinExc/Pages/Currency.aspx" target="_blank">сайт</a> их центрального банка. Валюта страны — саудовский риал, и курсы других валют ЦБ устанавливает по отношению к ней. То есть, нет смысла спрашивать с банка курс самого риала. Однако сайт невозмутимо предлагает выбрать его дважды:</p>
<p><img alt="Форма выбора" src="https://kostyanetsky.ru/notes/singapore-doll/cb.png"/></p>
<p>Для справки: первый вариант ломает интерфейс, а второй педантично выдает единицу на любую дату.</p>
<p>Другая забавная деталь: коллеги, кажется, хранят названия валют как строки длиной в 14 символов. Иначе сложно объяснить, почему по их данным в Канаде используется не канадский доллар, а CANADIAN DOLLA, а в Румынии — загадочный NEW ROMANIAN L вместо леи. Впрочем, этим двоим ещё повезло: Сингапур, например, ведёт расчёты в SINGAPORE DOLL.</p></description>
        </item>
        
        <item>
            <title>Не уникальные метаданные</title>
            <link>https://kostyanetsky.ru/notes/data-history-duplication</link>
            <guid isPermaLink="false">note-data-history-duplication</guid>
            <pubDate>Sat, 08 Jun 2024 18:28:35 +0700</pubDate>
            <description><p>В очередной раз столкнулся с противным багом, при котором платформа ломает таблицу с метаданными истории данных. </p>
<p>Внешне он выглядит так: вы обновляете конфигурацию базы, и при попытке реструктуризации выскакивает ошибка "Таблица метаданных истории данных cодержит не уникальные записи, которые должны быть удалены". </p>
<p>При этом платформа не предлагает никакого понятного способа найти такие записи — иди туда, не знаю куда, сделай то, не знаю что.   </p>
<p><img alt="Таблица метаданных истории данных cодержит не уникальные записи, которые должны быть удалены" src="https://kostyanetsky.ru/notes/data-history-duplication/error.png"/></p>
<p>Проблему можно решить, порывшись в базе данных. Таблица, на которую ссылается ошибка — _DataHistoryMetadata. В ней лежат версии метаданных каждого объекта, для которого ведётся история. Это позволяет платформе понимать, какие реквизиты были у объекта на любой момент времени, в течении которого для объекта велась история.</p>
<p>Как это работает? Ну, когда меняется состав реквизитов объекта (например, реквизит в справочнике добавили), платформа запоминает его метаданные: конкретно, добавляет в _DataHistoryMetadata новую запись и сохраняет в ней актуальный список реквизитов объекта, а также номер версии этого списка (например, в при включении истории для объекта сохраняется первая версия метаданных, при добавлении какого-нибудь реквизита — вторая и так далее).</p>
<p>Ещё платформа ставит в созданной записи отметку, что именно эта версия объекта — самая актуальная, после чего снимает этот флаг с той версии, которая была помечена актуальной до этого.</p>
<p>Так вот, проблема в том, что платформа иногда забывает сделать последний шаг и в таблице появляется сразу две версии, помеченные как актуальные. Конфигуратор понимает это, но сделать ничего не может.</p>
<p><img alt="Как помочь больной скотине?" src="https://kostyanetsky.ru/notes/data-history-duplication/howto.jpeg"/></p>
<p>Решение вытекает из алгоритма выше: нужно найти конфликтующие версии и отобрать признак актуальности у той, что старше. Лучше использовать запросы: история данных включают, как правило, для кучи объектов и состав реквизитов у них постоянно меняется — в общем, версий в таблице будет столько, что черт ногу сломит.</p>
<p>Если вы тоже столкнулись с этой проблемой и поэтому читаете этот текст — можете воспользоваться <a href="https://gist.github.com/vkostyanetsky/6496c67e2b2fd3d064c4cafd16da0b79" target="_blank">запросами</a>, что написал я:</p>
<ol>
<li>get-issues.sql проверяет, что проблема есть: ищет версии метаданных, которые одновременно помечены как актуальные.</li>
<li>fix-issues.sql снимает признак актуальности с тех версий, которые на самом деле устарели.</li>
</ol>
<p>Оба запроса написаны для Microsoft SQL Server. Если вы используете PostgreSQL, то <a href="https://gist.github.com/vkostyanetsky/75665ce04247e900743604eb386d1889" target="_blank">вот они же</a> для этой СУБД.</p>
<p>Запросы потребуют небольшой адаптации под конкретную базу: в них используется поле _fld626, в котором хранится разделитель данных. В вашей таблице _DataHistoryMetadata это поле может называться иначе, поэтому нужно обновить его имя на актуальное. Ошибиться будет трудно — у таблицы только одно поле с префиксом _fld.</p>
<p>P.S. Напоминаю, что лицензионное соглашение запрещает ковыряться в базе данных в обход средств платформы, так что на такие эксперименты можно идти, только если других вариантов не осталось.</p></description>
        </item>
        
        <item>
            <title>Главная проблема UUID</title>
            <link>https://kostyanetsky.ru/notes/uuid-main-issue</link>
            <guid isPermaLink="false">note-uuid-main-issue</guid>
            <pubDate>Sun, 02 Jun 2024 23:18:48 +0700</pubDate>
            <description><p>Наткнулся на <a href="https://www.cybertec-postgresql.com/en/unexpected-downsides-of-uuid-keys-in-postgresql/" target="_blank">хороший текст</a> об основной проблеме, которую таскает с собой UUID. Для 1С она тоже актуальна: все ссылочные объекты платформы (элементы справочников, документы и так далее) имеют собственные UUID. Они хранятся в БД, активно используются при поиске и, понятно, обильно индексируются (со всеми вытекающими последствиями). </p>
<p>1С старается компенсировать проблему, создавая последовательные UUID. Пусть не идеально, но в целом эта штука работает и индексы получаются более-менее ровными. Да и вообще в сообществе об этом говорят довольно давно: вот, например, бородатый <a href="https://forum.mista.ru/topic.php?id=801986" target="_blank">топик на Мисте</a> (правда, тут диалог быстро перерос в курятник и из шести десятков комментариев от силы полтора — по делу).</p>
<p>P.S. Рассмешила ремарка про вероятность создать в одной базе два одинаковых UUID:</p>
<blockquote>
<p>As an aside, for those worried about collisions: you should take up the lottery, since winning the jackpot twice in a row is a much more likely outcome than your system ever generating two identical random 128 bit numbers.</p>
</blockquote></description>
        </item>
        
    </channel>
</rss>