<rss version="2.0">
    <channel>    
        <title>Влад Костянецкий</title>
        <description>Привет! Меня зовут Влад, я — разработчик приложений для бизнеса.</description>
        <language>ru</language>
        <link>https://kostyanetsky.ru</link>
        <lastBuildDate>Sun, 02 Sep 2018 15:48:30 +0700</lastBuildDate>
        
        <item>
            <title>Принцип не-осуждения</title>
            <link>https://kostyanetsky.ru/notes/non-judgmental-attitude</link>
            <guid isPermaLink="false">note-non-judgmental-attitude</guid>
            <pubDate>Sun, 02 Sep 2018 15:48:30 +0700</pubDate>
            <description><p>Хорошая <a href="http://maximilyahov.ru/blog/all/mne-ok" target="_blank">заметка</a> Максима Ильяхова про анализ чего-то такого, что вроде бы вас не касается, но почему-то невероятно раздражает. Напомнило американский принцип не-осуждения, про который я читал пару лет назад; тут немного другие формулировки, но суть — точно та же.</p>
<p>У нас этот подход, в общем, тоже есть — даже в фольклоре осел со знаменитым «не суди и не судим будешь». Жаль, что пока не так широко применяется.</p></description>
        </item>
        
        <item>
            <title>Поиск долгих запросов с помощью Python</title>
            <link>https://kostyanetsky.ru/notes/longest-queries-using-python</link>
            <guid isPermaLink="false">note-longest-queries-using-python</guid>
            <pubDate>Sun, 18 Jul 2021 17:23:55 +0700</pubDate>
            <description><p>Выложил <a href="https://github.com/vkostyanetsky/ScriptsFor1C/blob/master/Технологический журнал/LongestQueries.py" target="_blank">скрипт на Python</a> для поиска длительных запросов в ТЖ 1С. Накатал его в приступе отчаяния: никак не мог понять, почему мой <a href="https://github.com/vkostyanetsky/ScriptsFor1C/blob/master/Технологический журнал/LongestQueries.sh" target="_blank">верный баш</a> для одного из запросов выдаёт среднее время выполнения больше максимального.</p>
<p>Как выяснилось, проблема была в gawk. Для некоторых событий ТЖ эта утилита не могла определить длительность: пыталась преобразовать строку в число, фейлилась и… Нет, что вы! Конечно, не кидалась исключением! Просто невозмутимо считала эти строки за ноль и ехала дальше.</p>
<p>Патч, кстати, вышел ещё глупее проблемы: я просто <a href="https://github.com/vkostyanetsky/ScriptsFor1C/commit/946f271d6ea0c1e618b180cee11ae91ce4632c18" target="_blank">сделал</a> явное преобразование строки в число, и всё заработало как надо. Чем, блин, явное преобразование в мире gawk'а отличается от неявного? И, главное, почему?</p>
<p>Короче, цирк уехал, новый скрипт остался. Впрочем, он бережнее расходует память и процессор: в скрипте на баше для расчёта количества выполнений запроса, суммарного времени выполнения и максимального времени одного выполнения я использовал три коллекции, у каждой из которых ключом был текст запроса и его контекст. Соответственно, все три нужно было обновлять и держать в памяти.</p>
<p>Это вполне рабочая тактика, пока входящий поток не переваливает за сотни тысяч элементов: где-то тут мы начинаем терять гигабайты ОЗУ на хранении коллекций и прорву времени процессора на поиске в них. Новый скрипт попрямее: коллекция одна, но хранит всe данные по каждому запросу.</p></description>
        </item>
        
        <item>
            <title>Разные стороны медали</title>
            <link>https://kostyanetsky.ru/notes/different-sides-of-one-coin</link>
            <guid isPermaLink="false">note-different-sides-of-one-coin</guid>
            <pubDate>Mon, 05 Mar 2018 00:00:00 +0700</pubDate>
            <description><p><img alt="Привет!" src="https://kostyanetsky.ru/notes/different-sides-of-one-coin/ru.png"/></p>
<p>Фидбек — одна из самых клевых штук в моей профессии. Да, не первый год программирую, да, кучу всего написал, переписал и переделал, и всё равно каждый сложный механизм, наконец заработавший так, как надо — это… Ну, не знаю. Как снова и снова слышать «да» на выпускном бале :-)</p>
<p>Это несколько компенсирует обратную сторону медали — когда ты, например, в стопятый раз пытаешься разобраться в стопяти уровнях абстракции чьего-то приложения, ошибаешься снова и снова, за окном два часа ночи и вместо крови по венам давно бежит кофе.</p></description>
        </item>
        
        <item>
            <title>СКД и право просмотра</title>
            <link>https://kostyanetsky.ru/notes/rights-for-dcs</link>
            <guid isPermaLink="false">note-rights-for-dcs</guid>
            <pubDate>Tue, 28 Aug 2018 20:35:33 +0700</pubDate>
            <description><p>Универсальный подход системы компоновки данных «если у пользователя нет права на просмотр чего-то, то этого как бы нет» иногда заставляет платформу выкидывать знатные фортели. Нет, сферический отчет в вакууме и правда работает хорошо — например, если нет права на просмотр какого-то справочника, то в отчете он фигурировать не будет. Однако реальные примеры бывают посложнее.</p>
<p>Например, пару недель назад я отлаживал отчет, который при попытке генерации выдавал понятную на первый взгляд ошибку:</p>
<p><img alt="У вас настройка кривая, товарищ!" src="https://kostyanetsky.ru/notes/rights-for-dcs/ru.png"/></p>
<p>Отчет гигантский — запрос на добрую тысячу строк, сложная настройка, здоровенный макет, запутанный код компоновки. Первое подозрение пало на ошибку в настройке, но расследование быстро дошло от ссылки на валюту в выборке данных до чтения константы с этой валютой на самом нижнем уровне отчета, на которую не было права просмотра.</p>
<p>Не скажу сходу, что именно тут сбило платформу с толку и привело к не очевидной диагностике — то ли манипуляции с временной таблицей, куда эта константа была прочитана, то ли то, что читалась она в конструкции ВЫБОР, то ли то, что на сам справочник валют все необходимые права были. Искать конкретное условие или их сочетания я не стал — думаю, это просто специфика реализации движка СКД, которая может меняться от версии к версии. Достаточно не забывать о праве просмотра, и проблемы не будет.</p>
<p>Что касается ошибки, при столкновении с ней стоит вывести проблемный отчет под полными правами. Если тут всё о'кей, нужно набросать список таблиц, откуда отчет читает данные, и проверить — все ли они с правами на чтение и просмотр.</p>
<p>Нудно, но может сэкономить прилично времени.</p></description>
        </item>
        
        <item>
            <title>ЭтотОбъект.ЭтотОбъект</title>
            <link>https://kostyanetsky.ru/notes/thisobject-thisobject</link>
            <guid isPermaLink="false">note-thisobject-thisobject</guid>
            <pubDate>Fri, 24 Jul 2020 10:47:34 +0700</pubDate>
            <description><p><a href="https://twitter.com/webholt/status/923830370822389760" target="_blank"><img alt="Твит" src="https://kostyanetsky.ru/notes/thisobject-thisobject/snap-tweet-webholt-923830370822389760.png"/></a></p>
<p>Обожаю JavaScript! Каждый раз, когда у меня сгорает задница от какой-нибудь странной дичи в любимой платформе, я просто открываю любой тред про будни веб-девелоперов и быстро, очень быстро успокаиваюсь.</p>
<p>Впрочем, похожие трюки можно повторить в 1С. Например, JavaScript понимает window.window.window.location, а платформа — <a href="https://kostyanetsky.ru/notes/thisobject-thisobject/thisobject-thisobject.png" target="_blank">вот это</a> :-)</p></description>
        </item>
        
        <item>
            <title>Поиск методов с параметром</title>
            <link>https://kostyanetsky.ru/notes/find-methods-with-parameter</link>
            <guid isPermaLink="false">note-find-methods-with-parameter</guid>
            <pubDate>Mon, 18 Nov 2019 19:18:12 +0700</pubDate>
            <description><p>Задача: нужно найти в общих модулях конфигурации методы с определенным параметром (в этом примере — с параметром DecimalPlacesFor).</p>
<p>Обычный поиск по коду конфигурации даст массу ложных срабатываний (например, все обращения к параметру с таким именем в теле методов). Поиск по регулярным выражениям платформа пока не поддерживает, поэтому выгодно выгрузить конфигурацию в файлы и натравить на папку общих модулей <a href="https://github.com/vkostyanetsky/ScriptsForLogAnalysis/blob/master/Файлы%20конфигурации/MethodsWithParameter.sh" target="_blank">скрипт</a> на баше.</p>
<p>Первая часть скрипта (до пайпа) выполняет сам поиск, вторая — отрезает лишнее, чтобы на вывод уходили только названия модулей и найденных в них методов. Получится, например, так:</p>
<p><img alt="Скриншот консоли" src="https://kostyanetsky.ru/notes/find-methods-with-parameter/bash.png"/></p>
<p>Профит? Профит!</p></description>
        </item>
        
        <item>
            <title>Firewatch</title>
            <link>https://kostyanetsky.ru/notes/firewatch</link>
            <guid isPermaLink="false">note-firewatch</guid>
            <pubDate>Sat, 22 Apr 2017 21:50:58 +0700</pubDate>
            <description><iframe allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen="" frameborder="0" height="315" src="https://www.youtube.com/embed/WexJcqgismA" width="560"></iframe>
<p>Обычная, человеческая такая история, и ей совершенно по-человечески чего-то не хватает. Какой-то искры, что ли? Идеи? Смысла? Чем ближе к развязке, тем сильнее становится ощущение, что в кастрюлю забыли налить супа.</p>
<p>Не, я не хочу сказать, что играть не стоит. Тут <strong>очень</strong> живые и здорово прописанные диалоги, которые делают три четверти атмосферы. Кроме того, игра неплохо выглядит (хотя я не очень понял, откуда в отзывах столько восторгов — в каком-нибудь «The Vanishing of Ethan Carter» виды встречались покруче) и в целом проходится на ура.</p>
<p>Но концовка сюжета откровенно скомкана, а кульминация просто отсутствует. Да, я в курсе насчёт заложенной философии — мол, это жизнь, бла-бла-бла, многоточий больше чем точек, бла-бла-бла. Но, камон! Если история ставит кучу вопросов и не отвечает ни на один из них — это не очень-то и круто, как ни ссылайся на age-check.</p></description>
        </item>
        
        <item>
            <title>White Day</title>
            <link>https://kostyanetsky.ru/notes/white-day</link>
            <guid isPermaLink="false">note-white-day</guid>
            <pubDate>Wed, 17 Jan 2018 21:16:27 +0700</pubDate>
            <description><iframe allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen="" frameborder="0" height="315" src="https://www.youtube.com/embed/VRiYZbAmun4" width="560"></iframe>
<p>Может, этот хоррор и нишевый, но и правда неплохой. Атмосфера ночной школы, набитой мрачными секретами, удалась на славу — напряжение отпускает редко, а игра то и дело подкидывает сюрпризы там, откуда не ждешь. Я в этом жанре стреляный воробей, а все равно вздрогнуть не раз пришлось.</p>
<p>Местный сюжет меняется в зависимости от действий игрока, и если хочется добраться до конца истории — одним прохождением никак не обойтись. Но, на мой взгляд, оно того стоит. Например, из-за антагониста — это сравнительно редкий случай, когда он вышел в разы интереснее, привлекательнее и трагичнее, чем протагонисты и все остальные герои вместе взятые.</p></description>
        </item>
        
        <item>
            <title>Control</title>
            <link>https://kostyanetsky.ru/notes/control</link>
            <guid isPermaLink="false">note-control</guid>
            <pubDate>Sat, 14 Sep 2019 16:16:53 +0700</pubDate>
            <description><iframe allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen="" frameborder="0" height="315" src="https://www.youtube.com/embed/r6RUXzb3NxY" width="560"></iframe>
<p>К игре у меня две претензии. Во-первых, местные «измененные предметы»: их описания в сравнении с плодами буйной фантазии авторов из <a href="https://ru.wikipedia.org/wiki/SCP_Foundation" target="_blank">фонда SCP</a> выглядят не слишком ярко. Да, есть приятные исключения, но эта часть все равно кажется слабее остальной паранормальщины, которая есть в игре.</p>
<p>Вторая претензия — то, при каких обстоятельствах игрок слышит <a href="https://www.youtube.com/watch?v=CkojH7htq-k" target="_blank">My Dark Disquet</a> от Poets of The Fall. Черт побери, это слишком крутой трек для такого проходного участка! Ожидал встретить его во время титров или какой-нибудь сумасшедшей схватки.</p>
<p>Я понимаю, что оба пункта звучат мальца несерьёзно, но это правда всё. Control исключительно хороша и внешне, и геймплейно, и сюжетно. Единственная причина, по которой я никому не подарю эту игру на Новый Год — в Epic Games Store пока нет возможности это сделать :-)</p></description>
        </item>
        
        <item>
            <title>Большое внедрение 1С</title>
            <link>https://kostyanetsky.ru/notes/big-implementation</link>
            <guid isPermaLink="false">note-big-implementation</guid>
            <pubDate>Tue, 15 Oct 2019 17:56:15 +0700</pubDate>
            <description><p>Что можно считать большим внедрением 1С? Фактически, эта платформа в России используется почти везде — даже в тех компаниях, где широко применяются решения конкурентов (например, тот же SAP). Конечно, где-то объемы внедрения невелики и 1С решает чисто утилитарные задачи вроде формирования отчетности, но среди работ ЦКТП можно найти по-настоящему колоссальные проекты — например, оптимизацию системы «<a href="http://v8.1c.ru/expert/cts/cts-218-001.htm" target="_blank">Деловых линий</a>», которая рассчитана на пять тысяч одновременно работающих пользователей.</p>
<p>В общем, всё это приводит к тому, что средним внедрением в России сейчас считаются базы, в которых одновременно работают сотни пользователей, а большим внедрением — базы, где работают от тысячи пользователей (и больше).</p>
<p>Размер базы при этом — не критерий: есть множество конфигураций, не предполагающих одновременной работы пользователей. Классический пример — 1C:Документооборот, менее классический — «Управление Автовокзалами» Авибуса. Последняя в состоянии накопить в своей центральной базе огромный объем данных от удаленных узлов своей распределенной сети (автовокзалов и автостанцией), однако большое количество одновременно работающих пользователей для нее не характерно.</p></description>
        </item>
        
    </channel>
</rss>