

<!doctype html>
<html lang="ru" class="text-[18px] leading-[1.65]">
  <head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width,initial-scale=1.0">

    <title>Заметки</title>

    <meta name="description" content="" />
    
    <!-- RSS -->

    <link rel="alternate" type="application/rss+xml" title="Сайт Влада" href="https://kostyanetsky.ru/rss.xml" />

    <!-- Icons -->

    <link rel="icon" href="https://kostyanetsky.ru/favicon.ico">
    <link rel="icon" href="https://kostyanetsky.ru/assets/icons/icon.svg" type="image/svg+xml">
    <link rel="apple-touch-icon" href="https://kostyanetsky.ru/assets/icons/apple-touch-icon.png">
    <link rel="manifest" href="https://kostyanetsky.ru/manifest.webmanifest">    

    <!-- Open Graph -->

    <meta property="og:title" content="Заметки"/>
    <meta property="og:description" content=""/>
    <meta property="og:image" content="https://kostyanetsky.ru/assets/images/og.jpg">
    <meta property="og:type" content="article"/>
    <meta property="og:url" content= "https://kostyanetsky.ru/notes/page-10" />    

    <!-- Tailwind (CDN) -->
    <script src="https://cdn.tailwindcss.com"></script>

<style>

  /* PT Sans (regular) — modern set */
  @font-face {
    font-family: "PT Sans";
    font-style: normal;
    font-weight: 400;
    font-display: swap;
    src:
      local("PT Sans"),
      local("PTSans-Regular"),
      url("../assets/fonts/pt-sans-v16-latin_cyrillic-regular.woff2") format("woff2"),
      url("../assets/fonts/pt-sans-v16-latin_cyrillic-regular.woff") format("woff");
  }

  :root {
    --site-font: "PT Sans", ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, Helvetica, Arial,
      "Apple Color Emoji", "Segoe UI Emoji";

    --text: rgb(0 0 0);                /* black */
    --text-strong: rgb(0 0 0);         /* black */
    --muted: rgb(71 85 105);           /* slate-600 */
    --link: rgb(15 23 42);             /* slate-900 */
    --link-underline: rgb(203 213 225);/* slate-300 */
    --link-underline-hover: rgb(100 116 139); /* slate-500 */

    --border: rgb(226 232 240);        /* slate-200 */
    --surface: rgb(255 255 255);       /* white */
    --surface-soft: rgb(248 250 252);  /* slate-50 */

    --radius-sm: 10px;
    --radius-md: 16px;

    --space-1: 0.35rem;
    --space-2: 0.75rem;
    --space-3: 0.9rem;
    --space-4: 1.2rem;
    --space-5: 1.8rem;
  }

  body {
    font-family: var(--site-font);
    color: var(--text);
    font-kerning: normal;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    text-rendering: optimizeLegibility;
  }

  ::selection {
    background: rgb(226 232 240);
  }

  .prose-like > * + * {
    margin-top: var(--space-3);
  }

  .prose-like p {
    color: var(--text);
  }

  .prose-like strong {
    color: var(--text-strong);
    font-weight: 600;
  }

  .prose-like h2 {
    margin-top: var(--space-5);
    font-size: 1.25rem;
    line-height: 1.5;
    font-weight: 600;
    color: var(--text-strong);
  }

  .prose-like ul,
  .prose-like ol {
    padding-left: 1.2rem;
    color: var(--text);
  }

  .prose-like ul {
    list-style: disc;
  }

  .prose-like ol {
    list-style: decimal;
  }

  .prose-like li {
    margin-top: var(--space-1);
  }

  .prose-like a {
    color: var(--link);
    text-decoration: underline;
    text-decoration-color: var(--link-underline);
    text-decoration-thickness: 1px;
    text-underline-offset: 0.18em;
  }

  .prose-like a:hover {
    text-decoration-color: var(--link-underline-hover);
  }

  .prose-like a:focus-visible {
    outline: 2px solid rgb(148 163 184); /* slate-400 */
    outline-offset: 2px;
    border-radius: 6px;
  }

  .prose-like :not(pre) > code {
    font-size: 0.95em;
    padding: 0.1em 0.35em;
    border: 1px solid var(--border);
    border-radius: 0.5rem;
    background: var(--surface-soft);
  }

  .prose-like pre {
    margin-top: 1rem;
    padding: 0.9rem 1rem;
    border: 1px solid var(--border);
    border-radius: var(--radius-md);
    background: var(--surface-soft);
    overflow-x: auto;
    max-width: 100%;
    -webkit-overflow-scrolling: touch;
    tab-size: 2;
  }

  .prose-like pre code {
    display: block;
    padding: 0;
    border: 0;
    background: transparent;
    border-radius: 0;

    font-size: 0.95rem;
    line-height: 1.6;
    color: rgb(15 23 42);
    white-space: pre;
    word-break: normal;
  }

  .prose-like a[id] {
    scroll-margin-top: 6rem;
  }

  .figure {
    margin-top: var(--space-4);
    border: 1px solid var(--border);
    border-radius: var(--radius-md);
    overflow: hidden;
    background: var(--surface);
  }

  .figure img {
    width: 100%;
    height: auto;
    display: block;
  }

  .figure figcaption {
    padding: var(--space-2) 1rem;
    font-size: 0.875rem;
    color: var(--muted);
    border-top: 1px solid var(--border);
    background: var(--surface-soft);
  }

  .prose-like blockquote {
    margin-top: var(--space-4);
    padding: 0.75rem 1rem;
    border-left: 4px solid var(--border);
    background: var(--surface-soft);
    border-radius: var(--radius-sm);
    color: rgb(30 41 59);
  }

  .prose-like hr {
    margin-top: var(--space-5);
    border: 0;
    border-top: 1px solid var(--border);
  }
</style>

    <!-- Blog -->

    <script>
        let ctrlLeftUrl     = 'https://kostyanetsky.ru/notes/page-11';
        let ctrlRightUrl    = 'https://kostyanetsky.ru/notes/page-9';
    </script>
    
    <script src="https://kostyanetsky.ru/assets/blog.js"></script>    

  </head>

  <body class="min-h-screen bg-white text-slate-900">

<!-- Shared wrapper: top menu -->
<header class="border-b border-slate-200">
  <div class="mx-auto w-full max-w-4xl px-4 py-5">
    <div class="flex flex-wrap items-baseline gap-x-5 gap-y-2">
      
      <nav class="flex flex-wrap items-baseline gap-x-5 gap-y-2 text-sm">
        
        
        
        
        

        
        
          <a class="inline-block text-[1.25rem] leading-tight mr-4 border-b border-current no-underline transition-opacity hover:opacity-70 text-blue-600" href="https://kostyanetsky.ru/">Сайт Влада</a>
        

        
        
          <a class="inline-block text-[1.25rem] leading-tight mr-4 border-b border-current no-underline transition-opacity hover:opacity-70 text-blue-600" href="https://kostyanetsky.ru/projects/">Проекты</a>
        

        
        
          <a class="inline-block text-[1.25rem] leading-tight mr-4 border-b border-current no-underline transition-opacity hover:opacity-70 text-orange-600" href="https://kostyanetsky.ru/notes/">Заметки</a>
        
      </nav>

      
      <div class="ml-auto flex items-center gap-4">
        
          
            <span
              class="inline-block text-[1.35rem] leading-none text-slate-400"
              title="Видите опечатку? Поправьте меня!"
              aria-disabled="true"
            >✎</span>
          
        

        
          
          <a
            href="https://kostyanetsky.me/notes/page-10"
            class="inline-block text-[1rem] leading-tight text-blue-600 border-b border-current no-underline transition-opacity hover:opacity-70"
            title="EN"
          >
            EN
          </a>
        
      </div>
    </div>
  </div>
</header>

    <!-- Shared wrapper: content -->
    <main
      class="mx-auto w-full max-w-4xl px-4 py-10"
      id="pageMeta"
      data-page="10"
      data-total-notes="20"
      data-total-pages="12"
    >
      <a id="top" class="block scroll-mt-24"></a>

      

      <header class="space-y-3">
        <h1 class="text-3xl font-semibold tracking-tight">Заметки</h1>
        <p class="max-w-2xl text-slate-700">
          Мои мысли о жизни, работе и разных интересных штуках вокруг меня.
        </p>
      </header>

      <section class="mt-8 flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between">
        <div class="relative w-full sm:w-[420px]">
          <input
            id="search"
            type="search"
            placeholder="Поиск по заголовку / тегам / тексту…"
            class="w-full rounded-xl border border-slate-200 bg-white px-4 py-2.5 pr-10 text-sm text-slate-900 placeholder:text-slate-400 outline-none transition focus:border-slate-400"
          />
          <svg
            class="pointer-events-none absolute right-3 top-1/2 h-5 w-5 -translate-y-1/2 text-slate-400"
            xmlns="http://www.w3.org/2000/svg"
            fill="none"
            viewBox="0 0 24 24"
            stroke="currentColor"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="m21 21-4.35-4.35m1.35-5.65a7 7 0 1 1-14 0 7 7 0 0 1 14 0Z"
            />
          </svg>
        </div>

        <p class="text-sm text-slate-600">
          Показано: <span id="count" class="font-semibold text-slate-900">0</span>
          <span class="text-slate-400">·</span>
          <span id="pageInfo">Страница</span>
        </p>
      </section>

      <!-- Static notes (SEO + no-JS fallback) -->
      <section id="staticNotes" class="mt-10 space-y-12">
                
            

        <article class="rounded-2xl bg-white">

          <header class="space-y-2">

                        
            <header class="space-y-2">
            <a href="https://kostyanetsky.ru/notes/non-judgmental-attitude"
                class="inline text-2xl font-semibold tracking-tight hover:underline">
                Принцип не-осуждения
            </a>
            </header>
            

            <div class="flex flex-wrap items-center gap-x-3 gap-y-2 text-sm text-slate-600">
              <span>2 сентября 2018</span>
              
                <span class="text-slate-300">·</span>
                
                <div class="flex flex-wrap gap-2">
                    <span class="inline-flex items-center rounded-full border border-slate-200 bg-slate-50 px-2.5 py-1 text-xs text-slate-700">#meanwhile</span>
                </div>
                
              
            </div>

          </header>

          <div class="mt-5">
            <div class="prose-like">
              <p>Хорошая <a href="http://maximilyahov.ru/blog/all/mne-ok" target="_blank">заметка</a> Максима Ильяхова про анализ чего-то такого, что вроде бы вас не касается, но почему-то невероятно раздражает. Напомнило американский принцип не-осуждения, про который я читал пару лет назад; тут немного другие формулировки, но суть — точно та же.</p>
<p>У нас этот подход, в общем, тоже есть — даже в фольклоре осел со знаменитым «не суди и не судим будешь». Жаль, что пока не так широко применяется.</p>
            </div>
          </div>
          
        </article>


                
            

        <article class="rounded-2xl bg-white">

          <header class="space-y-2">

                        
            <header class="space-y-2">
            <a href="https://kostyanetsky.ru/notes/rights-for-dcs"
                class="inline text-2xl font-semibold tracking-tight hover:underline">
                СКД и право просмотра
            </a>
            </header>
            

            <div class="flex flex-wrap items-center gap-x-3 gap-y-2 text-sm text-slate-600">
              <span>28 августа 2018</span>
              
                <span class="text-slate-300">·</span>
                
                <div class="flex flex-wrap gap-2">
                    <span class="inline-flex items-center rounded-full border border-slate-200 bg-slate-50 px-2.5 py-1 text-xs text-slate-700">#1c</span>
                </div>
                
                <div class="flex flex-wrap gap-2">
                    <span class="inline-flex items-center rounded-full border border-slate-200 bg-slate-50 px-2.5 py-1 text-xs text-slate-700">#done</span>
                </div>
                
              
            </div>

          </header>

          <div class="mt-5">
            <div class="prose-like">
              <p>Универсальный подход системы компоновки данных «если у пользователя нет права на просмотр чего-то, то этого как бы нет» иногда заставляет платформу выкидывать знатные фортели. Нет, сферический отчет в вакууме и правда работает хорошо — например, если нет права на просмотр какого-то справочника, то в отчете он фигурировать не будет. Однако реальные примеры бывают посложнее.</p>
<p>Например, пару недель назад я отлаживал отчет, который при попытке генерации выдавал понятную на первый взгляд ошибку:</p>
<p><img alt="У вас настройка кривая, товарищ!" src="https://kostyanetsky.ru/notes/rights-for-dcs/ru.png"/></p>
<p>Отчет гигантский — запрос на добрую тысячу строк, сложная настройка, здоровенный макет, запутанный код компоновки. Первое подозрение пало на ошибку в настройке, но расследование быстро дошло от ссылки на валюту в выборке данных до чтения константы с этой валютой на самом нижнем уровне отчета, на которую не было права просмотра.</p>
<p>Не скажу сходу, что именно тут сбило платформу с толку и привело к не очевидной диагностике — то ли манипуляции с временной таблицей, куда эта константа была прочитана, то ли то, что читалась она в конструкции ВЫБОР, то ли то, что на сам справочник валют все необходимые права были. Искать конкретное условие или их сочетания я не стал — думаю, это просто специфика реализации движка СКД, которая может меняться от версии к версии. Достаточно не забывать о праве просмотра, и проблемы не будет.</p>
<p>Что касается ошибки, при столкновении с ней стоит вывести проблемный отчет под полными правами. Если тут всё о'кей, нужно набросать список таблиц, откуда отчет читает данные, и проверить — все ли они с правами на чтение и просмотр.</p>
<p>Нудно, но может сэкономить прилично времени.</p>
            </div>
          </div>
          
        </article>


                
            

        <article class="rounded-2xl bg-white">

          <header class="space-y-2">

                        
            <header class="space-y-2">
            <a href="https://kostyanetsky.ru/notes/jaina"
                class="inline text-2xl font-semibold tracking-tight hover:underline">
                Беги от дочери морей
            </a>
            </header>
            

            <div class="flex flex-wrap items-center gap-x-3 gap-y-2 text-sm text-slate-600">
              <span>29 июля 2018</span>
              
                <span class="text-slate-300">·</span>
                
                <div class="flex flex-wrap gap-2">
                    <span class="inline-flex items-center rounded-full border border-slate-200 bg-slate-50 px-2.5 py-1 text-xs text-slate-700">#videogames</span>
                </div>
                
              
            </div>

          </header>

          <div class="mt-5">
            <div class="prose-like">
              <p>Наталья О'Шей озвучила русский ролик для грядущего обновления World of Warcraft. У неё круто получаются такие образы — умеет и настроение создать, и стали в голос припустить.</p>
<iframe allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen="" frameborder="0" height="315" src="https://www.youtube.com/embed/5j-S448XC8k" width="560"></iframe>
<p>Вообще, если говорить о ней и «Мельнице» в целом — самые сильные песни у них именно те, где речь о чем-то конкретном. Были весной на концерте в честь выхода «Люциферазы» — прямо небо и земля; то ли мне не хватало знания контекста, то ли многие тексты и правда были здорово абстрактными, не знаю. Но в итоге местами было трудно понять, о чем песня, и настроение порядком сбивалось.</p>
<p>А тут даже знать особо ничего не нужно. Я в WoW не играл и не буду, но от финальных интонаций морозом по коже все равно отдает :-)</p>
            </div>
          </div>
          
        </article>


                
            

        <article class="rounded-2xl bg-white">

          <header class="space-y-2">

                        
            <header class="space-y-2">
            <a href="https://kostyanetsky.ru/notes/hpmor-printing"
                class="inline text-2xl font-semibold tracking-tight hover:underline">
                Печать ГПиМРМ
            </a>
            </header>
            

            <div class="flex flex-wrap items-center gap-x-3 gap-y-2 text-sm text-slate-600">
              <span>22 июля 2018</span>
              
                <span class="text-slate-300">·</span>
                
                <div class="flex flex-wrap gap-2">
                    <span class="inline-flex items-center rounded-full border border-slate-200 bg-slate-50 px-2.5 py-1 text-xs text-slate-700">#books</span>
                </div>
                
              
            </div>

          </header>

          <div class="mt-5">
            <div class="prose-like">
              <p>Возможно, вы уже слышали про то, что русский перевод «Методов рационального мышления» Элиезера Юдковского пошел в некоммерческую печать (спасибо «Эволюции» и другим инфопартнерам), но на всякий случай напомню ещё раз.</p>
<p>Книжка и правда хороша, я про неё уже <a href="https://kostyanetsky.ru/notes/hpmor" target="_blank">писал</a> пару лет назад. Учит правильным штукам и в такой форме, что не оторваться. Текст есть в свободном доступе, но если вы вдруг хотите бумажную копию — <a href="https://planeta.ru/campaigns/hpmor" target="_blank">прием заявок</a> еще идет.</p>
            </div>
          </div>
          
        </article>


                
            

        <article class="rounded-2xl bg-white">

          <header class="space-y-2">

                        
            <header class="space-y-2">
            <a href="https://kostyanetsky.ru/notes/fce-results"
                class="inline text-2xl font-semibold tracking-tight hover:underline">
                Результаты FCE
            </a>
            </header>
            

            <div class="flex flex-wrap items-center gap-x-3 gap-y-2 text-sm text-slate-600">
              <span>15 июля 2018</span>
              
                <span class="text-slate-300">·</span>
                
                <div class="flex flex-wrap gap-2">
                    <span class="inline-flex items-center rounded-full border border-slate-200 bg-slate-50 px-2.5 py-1 text-xs text-slate-700">#books</span>
                </div>
                
                <div class="flex flex-wrap gap-2">
                    <span class="inline-flex items-center rounded-full border border-slate-200 bg-slate-50 px-2.5 py-1 text-xs text-slate-700">#done</span>
                </div>
                
                <div class="flex flex-wrap gap-2">
                    <span class="inline-flex items-center rounded-full border border-slate-200 bg-slate-50 px-2.5 py-1 text-xs text-slate-700">#english</span>
                </div>
                
              
            </div>

          </header>

          <div class="mt-5">
            <div class="prose-like">
              <p>Кембридж прислал результаты июньских экзаменов. И — вступают трубы — FCE я сдал! Судя по баллам, ухитрился в чём-то налажать во время письменной части, зато неплохо отыгрался во время разговорной. Жаль, что экзаменаторы не дают более подробных комментариев; впрочем, и так понятно, куда дальше воевать :) Преподаватель заметила, что раньше вообще сообщали только итоговый балл — мол, понимайте как хотите, уважаемые претенденты.</p>
<p>В общем, в следующем году перевешу планку повыше — видимо, нужно готовиться к CAE.</p>
<p>По этому поводу вспомнился Фейнман со своей знаменитой «Вы, конечно, шутите». Среди прочего он рассказывал, как во время жизни в Бразилии учился играть на фригидейре и доучился до того, что его стали ставить в пример местным музыкантам:</p>
<blockquote>
<p>Я думаю, это напоминает ситуацию, когда человек, который говорит по-французски, приезжает в Америку. Сначала он делает все ошибки, которые можно сделать, и понимать его очень сложно. Но он непрерывно занимается, до тех пор пока не начинает говорить довольно хорошо, и манера речи этого человека начинает доставлять вам истинное удовольствие: у него очень милый акцент, и его приятно слушать.</p>
<p><em>― Ричард Фейнман</em></p>
</blockquote>
<p>Между «все ошибки» и «приятно слушать» непринужденно опущено целое море труда, но в целом этот синопсис мне нравится. Работаем куда-то туда!</p>
            </div>
          </div>
          
        </article>


                
            

        <article class="rounded-2xl bg-white">

          <header class="space-y-2">

                        
            <header class="space-y-2">
            <a href="https://kostyanetsky.ru/notes/kona"
                class="inline text-2xl font-semibold tracking-tight hover:underline">
                Kona
            </a>
            </header>
            

            <div class="flex flex-wrap items-center gap-x-3 gap-y-2 text-sm text-slate-600">
              <span>29 мая 2018</span>
              
                <span class="text-slate-300">·</span>
                
                <div class="flex flex-wrap gap-2">
                    <span class="inline-flex items-center rounded-full border border-slate-200 bg-slate-50 px-2.5 py-1 text-xs text-slate-700">#videogames</span>
                </div>
                
              
            </div>

          </header>

          <div class="mt-5">
            <div class="prose-like">
              <iframe allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen="" frameborder="0" height="315" src="https://www.youtube.com/embed/M6KizfrASRY" width="560"></iframe>
<p>У игры есть сильные стороны, которые честно старались удержать мое внимание: тут есть где погулять, что почитать, о чем подумать и на что посмотреть. Если вы цените это в играх — возможно, вам понравится. От прогулок и размышлений почти ничего не отвлекает — умереть от чего бы то ни было тут довольно сложно. Ровно как и заблудиться — у главного героя есть карта и автомобиль, а позже можно раздобыть ещё и снегоход.</p>
<p>Но сюжет меня здорово расстроил. Интригующая детективная завязка, не успев обрасти деталями, тает в воздухе и уступает место откровенной мистике. Всё бы ничего, но вместе с этим исчезает всякая интрига — зачем искать улики, строить догадки, вообще о чём-то волноваться? Необъяснимые видения из ниоткуда расскажут и покажут всё, что и как тут было, и вот ты уже невольно заражаешься меланхоличным отношением героя к паранормальщине вокруг.</p>
<p>При этом мистическая сторона сюжета сама по себе зияет здоровенными дырами. Да, картина трагедии ближе к концу становится более или менее понятна — но даже последнее, самое полное видение само по себе рождает целую кучу вопросов, на которые никто не трудится отвечать. Сюжет в этой игре вообще здорово напоминает её же карту — выглядит цельным, но по факту доступна от силы половина, а остальное скомкано под отчетливо читаемое «ну, потому что магия, магия такая, понимаете?».</p>
<p>Нет, блин, не понимаю.</p>
            </div>
          </div>
          
        </article>


                
            

        <article class="rounded-2xl bg-white">

          <header class="space-y-2">

                        
            <header class="space-y-2">
            <a href="https://kostyanetsky.ru/notes/message-to-user"
                class="inline text-2xl font-semibold tracking-tight hover:underline">
                Сообщение пользователю
            </a>
            </header>
            

            <div class="flex flex-wrap items-center gap-x-3 gap-y-2 text-sm text-slate-600">
              <span>30 апреля 2018</span>
              
                <span class="text-slate-300">·</span>
                
                <div class="flex flex-wrap gap-2">
                    <span class="inline-flex items-center rounded-full border border-slate-200 bg-slate-50 px-2.5 py-1 text-xs text-slate-700">#1c</span>
                </div>
                
              
            </div>

          </header>

          <div class="mt-5">
            <div class="prose-like">
              <p>В 1С:Предприятии есть удобный метод вывода сообщений — объект СообщениеПользователю. Он выводит их в нижней части формы и это, внезапно, потенциальная проблема: дело в том, что большинство пользователей туда не смотрит. Мол, если никаких явных ошибок на экране нет — беспокоиться не о чем.</p>
<p>Поэтому в случае, когда происходит сбой или просто нужно донести какую-то критично важную информацию, сообщение нужно выводить в диалоговом окне — например, через методы ПоказатьВопрос() или ПоказатьПредупреждение(). В противном случае пользователь может не обратить внимания на проблему и продолжить работу — несмотря на то, что какое-то действие не было выполнено или было выполнено не так. Впоследствии это станет явным и в проблеме (справедливо) обвинят вас.</p>
<p>До кучи можно вспомнить небольшие служебные формы: в них СообщениеПользователю вообще противопоказано. Да, на маленьком полотне сложнее не заметить всплывший внизу текст, однако тут дело в другом — одно-два сообщения буквально <a href="https://kostyanetsky.ru/notes/message-to-user/ru.png" target="_blank">пожирают</a> рабочее пространство формы и работать с ней становится неудобно.</p>
            </div>
          </div>
          
        </article>


                
            

        <article class="rounded-2xl bg-white">

          <header class="space-y-2">

                        
            <header class="space-y-2">
            <a href="https://kostyanetsky.ru/notes/these-nasty-smartphones"
                class="inline text-2xl font-semibold tracking-tight hover:underline">
                Эти мерзкие смартфоны
            </a>
            </header>
            

            <div class="flex flex-wrap items-center gap-x-3 gap-y-2 text-sm text-slate-600">
              <span>31 марта 2018</span>
              
                <span class="text-slate-300">·</span>
                
                <div class="flex flex-wrap gap-2">
                    <span class="inline-flex items-center rounded-full border border-slate-200 bg-slate-50 px-2.5 py-1 text-xs text-slate-700">#meanwhile</span>
                </div>
                
              
            </div>

          </header>

          <div class="mt-5">
            <div class="prose-like">
              <p><img alt="Социум" src="https://kostyanetsky.ru/notes/these-nasty-smartphones/drawing.png"/></p>
<p>Художник — <a href="https://www.patreon.com/adamtots" target="_blank">Адам Эллис</a>.</p>
<p>По-моему, это отличная иллюстрация к вечному стону «чего они все таращатся в телефоны, бла-бла-бла». Причина проста, как три копейки — у людей в телефоне их друзья и подружки, книжки и подкасты, игры и ютуб. Всё это куда интереснее, чем, скажем, хмурый дядька или мрачная тётка с синдромом гуру.</p>
<p>То же касается и детей. Соцсети набиты спорами по этому поводу, как бочка селедкой, однако причина проблемы остаётся точно такой же: если подросток при виде вас утыкается в телефон, ему с вами попросту не интересно и проблема, очевидно, в вас самих.</p>
            </div>
          </div>
          
        </article>


                
            

        <article class="rounded-2xl bg-white">

          <header class="space-y-2">

                        
            <header class="space-y-2">
            <a href="https://kostyanetsky.ru/notes/double-i"
                class="inline text-2xl font-semibold tracking-tight hover:underline">
                Двойная «i»
            </a>
            </header>
            

            <div class="flex flex-wrap items-center gap-x-3 gap-y-2 text-sm text-slate-600">
              <span>9 марта 2018</span>
              
                <span class="text-slate-300">·</span>
                
                <div class="flex flex-wrap gap-2">
                    <span class="inline-flex items-center rounded-full border border-slate-200 bg-slate-50 px-2.5 py-1 text-xs text-slate-700">#english</span>
                </div>
                
              
            </div>

          </header>

          <div class="mt-5">
            <div class="prose-like">
              <p>Разбирался недавно с транслитерацией собственной фамилии. Согласно правилам МИД'а, на английском она пишется как «Kostianetskii» — с двойной «i» в конце. Такое сочетание букв встречается довольно редко — «skiing» единственное частотное слово, которое приходит в голову.</p>
<p>Мне стало любопытно, почему так, и я загуглил. Точного ответа не нашёл, но одна из возможных причин забавная: пропись! Две «i» рядом только на экране смотрятся хорошо, а когда пытаешься написать их от руки — внезапно получается «u».</p>
<p>Подробнее и нагляднее про это — <a href="https://spellingisnotcrazy.weebly.com/blog/category/the-letter-i" target="_blank">здесь</a>.</p>
            </div>
          </div>
          
        </article>


                
            

        <article class="rounded-2xl bg-white">

          <header class="space-y-2">

                        
            <header class="space-y-2">
            <a href="https://kostyanetsky.ru/notes/different-sides-of-one-coin"
                class="inline text-2xl font-semibold tracking-tight hover:underline">
                Разные стороны медали
            </a>
            </header>
            

            <div class="flex flex-wrap items-center gap-x-3 gap-y-2 text-sm text-slate-600">
              <span>5 марта 2018</span>
              
                <span class="text-slate-300">·</span>
                
                <div class="flex flex-wrap gap-2">
                    <span class="inline-flex items-center rounded-full border border-slate-200 bg-slate-50 px-2.5 py-1 text-xs text-slate-700">#work</span>
                </div>
                
              
            </div>

          </header>

          <div class="mt-5">
            <div class="prose-like">
              <p><img alt="Привет!" src="https://kostyanetsky.ru/notes/different-sides-of-one-coin/ru.png"/></p>
<p>Фидбек — одна из самых клевых штук в моей профессии. Да, не первый год программирую, да, кучу всего написал, переписал и переделал, и всё равно каждый сложный механизм, наконец заработавший так, как надо — это… Ну, не знаю. Как снова и снова слышать «да» на выпускном бале :-)</p>
<p>Это несколько компенсирует обратную сторону медали — когда ты, например, в стопятый раз пытаешься разобраться в стопяти уровнях абстракции чьего-то приложения, ошибаешься снова и снова, за окном два часа ночи и вместо крови по венам давно бежит кофе.</p>
            </div>
          </div>
          
        </article>


                
            

        <article class="rounded-2xl bg-white">

          <header class="space-y-2">

                        
            <header class="space-y-2">
            <a href="https://kostyanetsky.ru/notes/papers-please-short-film"
                class="inline text-2xl font-semibold tracking-tight hover:underline">
                Ваши документы
            </a>
            </header>
            

            <div class="flex flex-wrap items-center gap-x-3 gap-y-2 text-sm text-slate-600">
              <span>1 марта 2018</span>
              
                <span class="text-slate-300">·</span>
                
                <div class="flex flex-wrap gap-2">
                    <span class="inline-flex items-center rounded-full border border-slate-200 bg-slate-50 px-2.5 py-1 text-xs text-slate-700">#films</span>
                </div>
                
                <div class="flex flex-wrap gap-2">
                    <span class="inline-flex items-center rounded-full border border-slate-200 bg-slate-50 px-2.5 py-1 text-xs text-slate-700">#videogames</span>
                </div>
                
              
            </div>

          </header>

          <div class="mt-5">
            <div class="prose-like">
              <iframe allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen="" frameborder="0" height="315" src="https://www.youtube.com/embed/YFHHGETsxkE" width="560"></iframe>
<p>Крутая экранизация «<a href="https://store.steampowered.com/app/239030/Papers_Please/" target="_blank">Papers, Please</a>», даром что на десять минут. Савочкин здорово сыграл, да и остальные не подкачали, включая сценариста. Запихнуть в такой хронометраж драму и сюжетный твист — это надо уметь.</p>
<p>Если вспомнить, что экранизации видеоигр обычно звёзд с небес не хватают — эту можно считать блестящим экземпляром.</p>
            </div>
          </div>
          
        </article>


                
            

        <article class="rounded-2xl bg-white">

          <header class="space-y-2">

                        
            <header class="space-y-2">
            <a href="https://kostyanetsky.ru/notes/why-so-serious"
                class="inline text-2xl font-semibold tracking-tight hover:underline">
                Чего так серьезно?
            </a>
            </header>
            

            <div class="flex flex-wrap items-center gap-x-3 gap-y-2 text-sm text-slate-600">
              <span>17 февраля 2018</span>
              
                <span class="text-slate-300">·</span>
                
                <div class="flex flex-wrap gap-2">
                    <span class="inline-flex items-center rounded-full border border-slate-200 bg-slate-50 px-2.5 py-1 text-xs text-slate-700">#1c</span>
                </div>
                
                <div class="flex flex-wrap gap-2">
                    <span class="inline-flex items-center rounded-full border border-slate-200 bg-slate-50 px-2.5 py-1 text-xs text-slate-700">#code-smell</span>
                </div>
                
              
            </div>

          </header>

          <div class="mt-5">
            <div class="prose-like">
              <p>Иногда при отладке какого-нибудь сложного механизма не хватает времени на адекватные имена переменных и методов. Как итог — в коде появляются загадочные КакогоФига, ПрименитьМагию и прочие ЖивыеНеудачи.</p>
<p>Этого нужно избегать, правда. На первый взгляд, конечно, смотрится забавно, но через месяц-другой написанный код нужно будет доработать — и тут-то проблема встанет в полный рост! Материться сквозь зубы на автора не выйдет лишь потому, что автор — ты сам.</p>
            </div>
          </div>
          
        </article>


                
            

        <article class="rounded-2xl bg-white">

          <header class="space-y-2">

                        
            <header class="space-y-2">
            <a href="https://kostyanetsky.ru/notes/white-day"
                class="inline text-2xl font-semibold tracking-tight hover:underline">
                White Day
            </a>
            </header>
            

            <div class="flex flex-wrap items-center gap-x-3 gap-y-2 text-sm text-slate-600">
              <span>17 января 2018</span>
              
                <span class="text-slate-300">·</span>
                
                <div class="flex flex-wrap gap-2">
                    <span class="inline-flex items-center rounded-full border border-slate-200 bg-slate-50 px-2.5 py-1 text-xs text-slate-700">#videogames</span>
                </div>
                
              
            </div>

          </header>

          <div class="mt-5">
            <div class="prose-like">
              <iframe allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen="" frameborder="0" height="315" src="https://www.youtube.com/embed/VRiYZbAmun4" width="560"></iframe>
<p>Может, этот хоррор и нишевый, но и правда неплохой. Атмосфера ночной школы, набитой мрачными секретами, удалась на славу — напряжение отпускает редко, а игра то и дело подкидывает сюрпризы там, откуда не ждешь. Я в этом жанре стреляный воробей, а все равно вздрогнуть не раз пришлось.</p>
<p>Местный сюжет меняется в зависимости от действий игрока, и если хочется добраться до конца истории — одним прохождением никак не обойтись. Но, на мой взгляд, оно того стоит. Например, из-за антагониста — это сравнительно редкий случай, когда он вышел в разы интереснее, привлекательнее и трагичнее, чем протагонисты и все остальные герои вместе взятые.</p>
            </div>
          </div>
          
        </article>


                
            

        <article class="rounded-2xl bg-white">

          <header class="space-y-2">

                        
            <header class="space-y-2">
            <a href="https://kostyanetsky.ru/notes/bus-trips-uploading"
                class="inline text-2xl font-semibold tracking-tight hover:underline">
                Выгрузка автобусных рейсов
            </a>
            </header>
            

            <div class="flex flex-wrap items-center gap-x-3 gap-y-2 text-sm text-slate-600">
              <span>17 ноября 2017</span>
              
                <span class="text-slate-300">·</span>
                
                <div class="flex flex-wrap gap-2">
                    <span class="inline-flex items-center rounded-full border border-slate-200 bg-slate-50 px-2.5 py-1 text-xs text-slate-700">#1c</span>
                </div>
                
                <div class="flex flex-wrap gap-2">
                    <span class="inline-flex items-center rounded-full border border-slate-200 bg-slate-50 px-2.5 py-1 text-xs text-slate-700">#done</span>
                </div>
                
                <div class="flex flex-wrap gap-2">
                    <span class="inline-flex items-center rounded-full border border-slate-200 bg-slate-50 px-2.5 py-1 text-xs text-slate-700">#work</span>
                </div>
                
              
            </div>

          </header>

          <div class="mt-5">
            <div class="prose-like">
              <p>С тех пор, как мы с коллегами заново автоматизировали <a href="http://kpat.ru/" target="_blank">КПАТ</a>, она работает на «<a href="http://avibus.pro/standalone/" target="_blank">Управлении автовокзалами</a>». Это конфигурация для 1С:Предприятия, то есть её можно сравнительно быстро интегрировать почти с чем угодно.</p>
<p>Первым делом мы решили наладить выгрузку маршрутного расписания автобусов на E-Traffic и Яндекс.Расписания.</p>
<h2>Что это за ресурсы?</h2>
<p>Первый ресурс, <a href="http://e-traffic.ru" target="_blank">E-Traffic</a> — это крупнейший в России агрегатор данных автовокзалов. Собирает информацию о запланированных рейсах и выступает как агент по продаже электронных билетов. То есть пассажирам не нужно продираться через сайты автовокзалов — на E-Traffic можно купить билет откуда угодно куда угодно.</p>
<p>Что касается <a href="http://rasp.yandex.ru" target="_blank">Яндекс.Расписаний</a> — это один из дочерних проектов российского поисковика. Как и E-Traffic, предназначен в первую очередь для пассажиров и умеет быстро строить относительно сложные маршруты с пересадками. Билетами они, правда, не торгуют.</p>
<h2>Как была сделана выгрузка?</h2>
<p>Поначалу мы нагородили довольно сложную архитектуру, позволяющую транслировать расписание в обе системы. Потели как черти — пока в ходе переговоров не выяснилось, что у E-Traffic уже есть рабочий транспорт для передачи расписания в Яндекс, и задача естественным образом не усохла вдвое.</p>
<p>Технически всё было сделано в виде веб-сервиса для «Управления автовокзалами». Получив SOAP-запрос от E-Traffic, он собирал внутри информационной базы 1С:Предприятия все необходимые данные о запланированных автобусных рейсах и возвращал их в виде XML-ки.</p>
<p>Нам даже не пришлось писать код получения расписания с каждого вокзала, входящего в сеть КПАТ'а: все они создаются и хранятся в одном месте — главном узле РИБ, а веб-сервис мы развернули именно там. В итоге больше времени ушло на разные согласования, чем на программирование.</p>
<h2>А где посмотреть?</h2>
<p>Внутренняя кухня снаружи не видна, да и там ничего необычного — роботы общаются с роботами, эка невидаль :-) Результат их болтовни — куда интереснее! Например, вот <a href="https://rasp.yandex.ru/search/bus/?fromName=Кемерово&amp;toName=Новокузнецк&amp;fromId=c64&amp;toId=c237&amp;when=сегодня" target="_blank">расписание</a> рейсов из Кемерово в Новокузнецк на сегодня.</p>
            </div>
          </div>
          
        </article>


                
            

        <article class="rounded-2xl bg-white">

          <header class="space-y-2">

                        
            <header class="space-y-2">
            <a href="https://kostyanetsky.ru/notes/sebby-x-player"
                class="inline text-2xl font-semibold tracking-tight hover:underline">
                Себби x Игрок
            </a>
            </header>
            

            <div class="flex flex-wrap items-center gap-x-3 gap-y-2 text-sm text-slate-600">
              <span>14 августа 2017</span>
              
                <span class="text-slate-300">·</span>
                
                <div class="flex flex-wrap gap-2">
                    <span class="inline-flex items-center rounded-full border border-slate-200 bg-slate-50 px-2.5 py-1 text-xs text-slate-700">#english</span>
                </div>
                
                <div class="flex flex-wrap gap-2">
                    <span class="inline-flex items-center rounded-full border border-slate-200 bg-slate-50 px-2.5 py-1 text-xs text-slate-700">#videogames</span>
                </div>
                
              
            </div>

          </header>

          <div class="mt-5">
            <div class="prose-like">
              <p>В конце июля я на волне энтузиазма <a href="https://acomics.ru/~sebby-x-player" target="_blank">перевёл</a> фанатскую мангу по «Stardew Valley», про которую я уже <a href="https://kostyanetsky.ru/notes/stardew-valley" target="_blank">писал</a> две недели назад.</p>
<p>Забавный опыт. Во-первых, автор — китаец (точнее, китаянка) и английский язык для неё не родной — как и для меня. В итоге ряд фреймов, скажем так, вызывал вопросы. Во-вторых, я обнаружил, что подыскать русский аналог английской фразы, который бы не выглядел цитатой из документации к порталу госуслуг — само по себе неплохой челлендж.</p>
<p>Короче, часть смысла по ходу дела, подозреваю, потерялась, хотя я постарался передать что мог и даже списался с автором, разбирая совсем уж непонятные участки. Было весело: я не знаю китайского, она — русского; общались на английском, а он у обоих далёк от идеала.</p>
<p>Думаю, некоторые фразы можно было сделать поживее, где-то ровнее поправить исходную картинку, но — нафиг. Лучшее — враг хорошего, а результат мне уже нравится. Конечно, в сухом остатке здесь нет чего-то особенно крутого — рисовка как рисовка, сюжет по большей части повторяет игру, но… Не знаю. Наверное, визуальные новеллы сделали из меня чересчур сентиментального сукиного сына :-)</p>
<p>Спасибо <a href="https://vk.com/id54890849" target="_blank">Кэт</a> за помощь с отрисовкой, <a href="https://twitter.com/amish77kin" target="_blank">Лему</a> — за подсказки по переводу и <a href="https://vk.com/mahrunteka" target="_blank">Марике</a> — за мысль. Ну и, конечно, <a href="https://curayukie.deviantart.com" target="_blank">Квантусу</a> — за мангу.</p>
            </div>
          </div>
          
        </article>


                
            

        <article class="rounded-2xl bg-white">

          <header class="space-y-2">

                        
            <header class="space-y-2">
            <a href="https://kostyanetsky.ru/notes/stardew-valley"
                class="inline text-2xl font-semibold tracking-tight hover:underline">
                Stardew Valley
            </a>
            </header>
            

            <div class="flex flex-wrap items-center gap-x-3 gap-y-2 text-sm text-slate-600">
              <span>1 августа 2017</span>
              
                <span class="text-slate-300">·</span>
                
                <div class="flex flex-wrap gap-2">
                    <span class="inline-flex items-center rounded-full border border-slate-200 bg-slate-50 px-2.5 py-1 text-xs text-slate-700">#videogames</span>
                </div>
                
              
            </div>

          </header>

          <div class="mt-5">
            <div class="prose-like">
              <iframe allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen="" frameborder="0" height="315" src="https://www.youtube.com/embed/ot7uXNQskhs" width="560"></iframe>
<p>Невероятно аддиктивный симулятор фермера, сделанный с огромным вниманием к деталям. Серьёзные ребята расскажут про саундтрек, про качественный пиксель-арт и прочие такие штуки, а я так не умею — мне просто офигенно понравилось, вот и всё :-)</p>
<p>Хотя нет, про саундтрек всё-таки скажу. Зимой в игре иногда играет «<a href="https://www.youtube.com/watch?v=Zr-PHm_qLgg" target="_blank">Ancient</a>», и это одна из самых простых и одновременно атмосферных мелодий, которые я вообще слышал в видеоиграх.</p>
            </div>
          </div>
          
        </article>


                
            

        <article class="rounded-2xl bg-white">

          <header class="space-y-2">

                        
            <header class="space-y-2">
            <a href="https://kostyanetsky.ru/notes/layers-of-fear"
                class="inline text-2xl font-semibold tracking-tight hover:underline">
                Layers of Fear
            </a>
            </header>
            

            <div class="flex flex-wrap items-center gap-x-3 gap-y-2 text-sm text-slate-600">
              <span>6 июля 2017</span>
              
                <span class="text-slate-300">·</span>
                
                <div class="flex flex-wrap gap-2">
                    <span class="inline-flex items-center rounded-full border border-slate-200 bg-slate-50 px-2.5 py-1 text-xs text-slate-700">#videogames</span>
                </div>
                
              
            </div>

          </header>

          <div class="mt-5">
            <div class="prose-like">
              <iframe allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen="" frameborder="0" height="315" src="https://www.youtube.com/embed/CyDs5UJfvks" width="560"></iframe>
<p>Спорная штука. С одной стороны — довольно яркая и сочная картина сумасшествия, показанная «изнутри». Неплохой в целом сюжет, хотя с какого-то момента финал начинает угадываться.</p>
<p>С другой — фантастическая коридорность, почти полное отсутствие челленджа и логики происходящего. Дело в том, что повествование идет от лица сумасшедшего и внутри его сознания, и это накладывает определённый отпечаток на геймплей — невозможно угадать, что нужно сделать в очередной комнате.</p>
<p>В итоге просто ходишь, ищешь триггеры и пытаешься понять, что означает очередная фантасмагория вроде плавящегося телефона или взрывающихся часов. Моменты, когда сквозь это прорываются по-настоящему сильные штуки — например, письма главного героя и его жены — редки и ощущаются как глотки свежего воздуха.</p>
<p>Я в целом не жалею, что прошёл — это тяжелая и грустная история, тщательно нарисованная и хорошо озвученная. Но, сдается мне, в море местного символизма утонуло немало смысла.</p>
            </div>
          </div>
          
        </article>


                
            

        <article class="rounded-2xl bg-white">

          <header class="space-y-2">

                        
            <header class="space-y-2">
            <a href="https://kostyanetsky.ru/notes/outlast-2"
                class="inline text-2xl font-semibold tracking-tight hover:underline">
                Outlast 2
            </a>
            </header>
            

            <div class="flex flex-wrap items-center gap-x-3 gap-y-2 text-sm text-slate-600">
              <span>29 апреля 2017</span>
              
                <span class="text-slate-300">·</span>
                
                <div class="flex flex-wrap gap-2">
                    <span class="inline-flex items-center rounded-full border border-slate-200 bg-slate-50 px-2.5 py-1 text-xs text-slate-700">#videogames</span>
                </div>
                
              
            </div>

          </header>

          <div class="mt-5">
            <div class="prose-like">
              <iframe allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen="" frameborder="0" height="315" src="https://www.youtube.com/embed/EOrTuPljfPU" width="560"></iframe>
<p>Не сказать, чтобы прямо провал, но — очень-очень слабо, особенно в сравнении с первой частью или её DLC. Ярких, пугающих, вообще вызывающих эмоции моментов — невероятно мало. Те же, что есть, быстро смываются волной раздражения от очередной смерти.</p>
<p>Из плюсов — крутая озвучка, неплохая графика, хорошая работа над мелкими деталями. Есть с десяток удачных сцен и полдюжины очень крутых ракурсов, ради которых, возможно, стоит играть. Мир игры вообще более или менее проработан — хотя здесь испытываешь чаще брезгливость да отвращение, а не страх, как в Маунт-Массиве.</p>
<p>Всё остальное — просто плохо. Корявый стелс в непроглядной темноте; бесконечные заскриптованные погони; блеклые, вяло раскрытые персонажи; частые баги вроде подвисания в воздухе или врагов, проходящих сквозь предметы.</p>
<p>Как венец — откровенно никакая концовка. Да, она додумывается, конечно, всё выглядит вполне логично, но… Как бы сформулировать. В общем, после восьми часов беготни от психопатов хочется видеть хоть какой-то результат своих усилий. А вместо него получаешь лишь огромное, жаркое, ослепительное нихрена — во всех смыслах.</p>
            </div>
          </div>
          
        </article>


                
            

        <article class="rounded-2xl bg-white">

          <header class="space-y-2">

                        
            <header class="space-y-2">
            <a href="https://kostyanetsky.ru/notes/firewatch"
                class="inline text-2xl font-semibold tracking-tight hover:underline">
                Firewatch
            </a>
            </header>
            

            <div class="flex flex-wrap items-center gap-x-3 gap-y-2 text-sm text-slate-600">
              <span>22 апреля 2017</span>
              
                <span class="text-slate-300">·</span>
                
                <div class="flex flex-wrap gap-2">
                    <span class="inline-flex items-center rounded-full border border-slate-200 bg-slate-50 px-2.5 py-1 text-xs text-slate-700">#videogames</span>
                </div>
                
              
            </div>

          </header>

          <div class="mt-5">
            <div class="prose-like">
              <iframe allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen="" frameborder="0" height="315" src="https://www.youtube.com/embed/WexJcqgismA" width="560"></iframe>
<p>Обычная, человеческая такая история, и ей совершенно по-человечески чего-то не хватает. Какой-то искры, что ли? Идеи? Смысла? Чем ближе к развязке, тем сильнее становится ощущение, что в кастрюлю забыли налить супа.</p>
<p>Не, я не хочу сказать, что играть не стоит. Тут <strong>очень</strong> живые и здорово прописанные диалоги, которые делают три четверти атмосферы. Кроме того, игра неплохо выглядит (хотя я не очень понял, откуда в отзывах столько восторгов — в каком-нибудь «The Vanishing of Ethan Carter» виды встречались покруче) и в целом проходится на ура.</p>
<p>Но концовка сюжета откровенно скомкана, а кульминация просто отсутствует. Да, я в курсе насчёт заложенной философии — мол, это жизнь, бла-бла-бла, многоточий больше чем точек, бла-бла-бла. Но, камон! Если история ставит кучу вопросов и не отвечает ни на один из них — это не очень-то и круто, как ни ссылайся на age-check.</p>
            </div>
          </div>
          
        </article>


                
            

        <article class="rounded-2xl bg-white">

          <header class="space-y-2">

                        
            <header class="space-y-2">
            <a href="https://kostyanetsky.ru/notes/unhappy"
                class="inline text-2xl font-semibold tracking-tight hover:underline">
                Совершенно несчастный
            </a>
            </header>
            

            <div class="flex flex-wrap items-center gap-x-3 gap-y-2 text-sm text-slate-600">
              <span>24 марта 2017</span>
              
                <span class="text-slate-300">·</span>
                
                <div class="flex flex-wrap gap-2">
                    <span class="inline-flex items-center rounded-full border border-slate-200 bg-slate-50 px-2.5 py-1 text-xs text-slate-700">#meanwhile</span>
                </div>
                
              
            </div>

          </header>

          <div class="mt-5">
            <div class="prose-like">
              <p>Наткнулся на «<a href="https://theoatmeal.com/comics/unhappy" target="_blank">How to be Perfectly Unhappy</a>» — комикс Мэтью Инмана о счастье, несчастье и том, что вообще стоит за этими словами.</p>
<p>У мужика отличное чувство юмора — собственно, он и известен как автор юмористических комиксов «The Oatmeal». Когда такие люди говорят о серьёзном, часто получается вот так: забавно, мудро и как-то откровенно, что ли.</p>
            </div>
          </div>
          
        </article>


        
      </section>

      <section id="dynamicNotes" class="mt-10 hidden space-y-12"></section>

      <div
        id="empty"
        class="mt-8 hidden rounded-2xl border border-slate-200 bg-slate-50 p-8 text-center text-slate-700"
      >
        Ничего не нашлось. Попробуй другой запрос?
      </div>

      <!-- Static pagination (works without JS; hide during search) -->
      <nav id="pagination" class="mt-10 flex items-center justify-between">
        
        <a
          id="prevLink"
          href="https://kostyanetsky.ru/notes/page-11"
          class="rounded-xl border border-slate-200 bg-white px-3 py-2 text-sm text-slate-700 transition hover:bg-slate-50"
        >
          ← Раньше
        </a>
        
        <span class="w-[1px]"></span>
        
        <a
          id="nextLink"
          href="https://kostyanetsky.ru/notes/page-9"
          class="rounded-xl border border-slate-200 bg-white px-3 py-2 text-sm text-slate-700 transition hover:bg-slate-50"
        >
          Дальше →
        </a>
        
      </nav>



    </main>

<script>
  // ------------------------------------------------------------
  // Hybrid mode:
  // - Default: show static HTML notes (SEO-friendly, no-JS ok).
  // - On first user search: fetch notes.json, hide static, render results.
  // - On clear search: show static again.
  // ------------------------------------------------------------

  const metaEl = document.getElementById("pageMeta");
  const notesJsonUrl = "https://kostyanetsky.ru/notes.json";

  const page = Number(metaEl.getAttribute("data-page") || "1");
  const totalPages = Number(metaEl.getAttribute("data-total-pages") || "1");
  const totalNotes = Number(metaEl.getAttribute("data-total-notes") || "0");

  const searchEl = document.getElementById("search");
  const countEl = document.getElementById("count");
  const pageInfoEl = document.getElementById("pageInfo");

  const staticNotesEl = document.getElementById("staticNotes");
  const dynamicNotesEl = document.getElementById("dynamicNotes");
  const emptyEl = document.getElementById("empty");
  const paginationEl = document.getElementById("pagination");

  let notesCache = null;
  let notesLoadPromise = null;

  function debounce(fn, ms = 200) {
    let t;
    return (...args) => {
      clearTimeout(t);
      t = setTimeout(() => fn(...args), ms);
    };
  }

  async function loadNotesJsonOnce() {
    if (notesCache) return notesCache;

    if (!notesLoadPromise) {
      notesLoadPromise = fetch(notesJsonUrl, { credentials: "same-origin" })
        .then((r) => {
          if (!r.ok) throw new Error(`Failed to load ${notesJsonUrl}: ${r.status}`);
          return r.json();
        })
        .then((data) => {
          // Expecting: [{ html: "<article>...</article>", text: "plain text for search (usually already lowercased)" }]
          notesCache = Array.isArray(data) ? data : [];
          return notesCache;
        })
        .catch((err) => {
          console.error(err);
          notesCache = [];
          return notesCache;
        });
    }

    return notesLoadPromise;
  }

  function showStaticMode() {
    dynamicNotesEl.classList.add("hidden");
    dynamicNotesEl.innerHTML = "";
    emptyEl.classList.add("hidden");

    staticNotesEl.classList.remove("hidden");
    paginationEl.classList.remove("hidden");

    countEl.textContent = String(totalNotes);
    pageInfoEl.textContent = `Страница ${page} из ${totalPages}`;
  }

  function showSearchMode() {
    staticNotesEl.classList.add("hidden");
    paginationEl.classList.add("hidden");

    dynamicNotesEl.classList.remove("hidden");
  }

  function filterNotes(notes, q) {
    const needle = (q ?? "").trim().toLowerCase();
    if (!needle) return notes;

    return notes.filter((n) => {
      const hay = String(n?.text ?? "");
      return hay.includes(needle);
    });
  }

  async function runSearch() {
    const q = (searchEl.value || "").trim();

    if (!q) {
      showStaticMode();
      return;
    }

    showSearchMode();

    const notes = await loadNotesJsonOnce(); // [{html, text}, ...]
    const filtered = filterNotes(notes, q);

    countEl.textContent = String(filtered.length);
    pageInfoEl.textContent = "Поиск";

    if (filtered.length === 0) {
      dynamicNotesEl.innerHTML = "";
      emptyEl.classList.remove("hidden");
      return;
    }

    emptyEl.classList.add("hidden");
    dynamicNotesEl.innerHTML = filtered.map((n) => n.html || "").join("\n");
  }

  showStaticMode();

  // Search handler
  searchEl.addEventListener("input", debounce(runSearch, 200));

  // Search autorun in case search string is set (refresh / back-forward cache)
  function runSearchSoon() {
    requestAnimationFrame(() => requestAnimationFrame(() => runSearch()));
  }

  document.addEventListener("DOMContentLoaded", runSearchSoon);

  window.addEventListener("pageshow", runSearchSoon);
</script>


    <!-- Shared wrapper: footer -->
    <footer class="mt-12 border-t border-slate-200">
      <div class="mx-auto w-full max-w-4xl px-4 py-8 text-sm text-slate-600">
        <div class="flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between">
          <p>Влад Костянецкий</p>
          <p>
            <a class="text-slate-900 underline decoration-slate-300 hover:decoration-slate-500" href="https://kostyanetsky.ru/rss.xml">RSS</a>
            <span class="mx-2 text-slate-300">·</span>
            <a class="text-slate-900 underline decoration-slate-300 hover:decoration-slate-500" href="https://github.com/vkostyanetsky">GitHub</a>
            <span class="mx-2 text-slate-300">·</span>
            <a class="text-slate-900 underline decoration-slate-300 hover:decoration-slate-500" href="https://t.me/tell_me_alisa">Telegram</a>            
          </p>
        </div>
      </div>
    </footer>

  </body>
</html>